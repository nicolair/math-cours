\input{NotesKonigIntro.tex}
\nocite{*}

\title{
         Notes sur \emph{Measure and Integration} de H. König \\
         \large Rédaction incomplète. Version  beta 2.5
      }
\author{Rémy Nicolaï}

\begin{document}
\maketitle
\tableofcontents
\clearpage

\section{Présentation}
\noindent Ce texte est constitué de notes de lecture sur le livre \emph{Measure and Integration} de Heinz König \cite{könig1997measure}.

\noindent L'ouvrage fournit des méthodes et des résultats de théorie des ensembles utilisés dans la théorie des mesures. Le cadre est tellement général qu'il est difficile de faire sens avec le texte sans une grande érudition sur le sujet. L'idée de ces notes est de reformuler les propriétés et constructions dans un cadre moins abstrait en mettant en avant les exemples du texte et en en introduisant de nouveaux.\newline
L'exemple principal est la mesure de Lebesgue dans $\R^n$. Elle vient d'une notion élémentaire de volume pour des hypercubes. Ce volume est étendu d'abord à l'ensemble des parties compactes puis à d'autres ensembles de parties de $\R^n$.\newline
En parallèle, une notion de densité arithmétique formée à partir de classes de congruence tente d'introduire une probabilité dans $\Z$. L'échec de cette tentative répond à l'échec de l'extension du volume à l'ensemble des parties seulement fermées. Ce parallelisme donne du relief aux développements du livre et appelle à éclaircir le rôle de la compacité.

\paragraph*{Systèmes et fonctions d'ensembles.}
Les objets fondamentaux utilisés dans la théorie des mesures sur un ensemble $X$ sont des parties $\mathfrak{S}$ de $\mathcal{P}(X)$ (appelés \emph{pavings} dans le livre) et des fonctions $\varphi$ définies dans $\mathfrak{S}$ à valeurs dans $\overline{\R}$ (appelés \emph{set fonctions} dans le livre).\newline
Avec le sens précis que prend le mot \emph{pavage} dans les mathématiques en France, on ne peut traduire \emph{paving} par \emph{pavage}. Comme l'auteur utilise aussi \emph{set system}, j'utiliserai \emph{système d'ensembles} pour désigner un \emph{paving} c'est à dire simplement une partie de $\mathcal{P}(X)$.\newline
Une fonction de $\mathfrak{S}$ dans $\overline{\R}$ sera désignée par \emph{fonction d'ensembles} (\emph{set fonction} dans le texte).

\begin{enumerate}
 \item  Les différents types de systèmes d'ensembles sont présentés en \ref{SystFoncEns}\ref{SystEns} et définis à partir des stabilités relativement aux opérations ensemblistes union, intersection, soustraction ensembliste, complémentation.\newline
 En particulier un système d'ensembles est un \emph{treillis} (lattice) si et seulement si il est stable pour l'union et l'intersection.
 \item Les propriétés significatives des fonctions d'ensembles sont présentées en \ref{SystFoncEns}\ref{FoncEns}. Les plus fondamentales pour une fonction définie dans un treillis sont l'isotonie (croissance) et la modularité (sorte d'additivité).
 \begin{displaymath}
   \begin{aligned}
     \forall (A,B) \in \mathfrak{S}^2, \;& A \subset B \Rightarrow \varphi(A) \leq \varphi(B) &\text{isotonie}& \\
     \forall (A,B) \in \mathfrak{S}^2, \;&  \varphi(A\cap B) + \varphi(A \cup B) = \varphi(A) + \varphi(B) &\text{modularité}&
   \end{aligned}
 \end{displaymath}

 \item Les concepts proches des mesures (\ref{SystFoncEns} \ref{FoncEns} \ref{ContenusMesures} ) sont des cas particuliers des situations précédentes.
 \item À partir d'une fonction d'ensembles $\varphi$, on peut construire (\ref{ExtenRegul} \ref{Enveloppes}) une fonction d'ensemble $\Phi$ définie dans $\mathcal{P}(X)$ tout entier qui possède de bonnes propriétés.
 \item La classe de Carathéodory (\ref{ExtenRegul}\ref{ClasseCaratheodory}) d'une fonction d'ensemble sur $\mathcal{P}(X)$ est un système d'ensembles qui possède de bonnes propriétés. C'est le cadre de la preuve de résultats importants.
\end{enumerate}

On notera $A'$ le complémentaire d'une partie $A \in \mathcal{P}(X)$ pour un ensemble $X$ quelconque.
\newpage

\section{Exemples}\label{Sec:Exples}
Deux exemples sont présentés. À côté du volume dans $\R^n$ qui est l'exemple principal du livre, je présente une fonction d'ensembles sur les parties de $\Z$ définie par des procédés analogues. Pour le moment, je nomme \emph{densité arithmétique} cette fonction d'ensembles. Les deux constructions sont parallèles.

\subsection{Cellules de base}\label{SubSec:CellulesBases}

\subsubsection{Cubes rationnels}\label{SubSubSec:CubesRat}
Dans cet exemple qui est l'exemple fondamental du livre, $X=\R^n$. Dans tout le livre, on pourra utiliser occasionnellement la \emph{norme infinie} de $\R^n$ ainsi qu'un résultat sur les intervalles. \index{norme infinie de $\R^n$}
\begin{defi}[Norme infinie de $\R^n$]
 On note $N$ la norme infinie de $\R^n$ définie par
 \begin{displaymath}
  \forall x=(x_1,\cdots,x_n)\in X= \R^n, \; N(x)=\max(|x_1|,\cdots,|x_n|).
 \end{displaymath}
\end{defi}

 \paragraph{Exercice sur des intervalles} \label{ExoIntervalles}
 Soit $x\leq y$ et $a\leq b$ réels. Montrer que
 \begin{displaymath}
  [x,y] \cap [a,b] \neq \emptyset
  \Leftrightarrow
  \left\lbrace
  \begin{aligned}
    x \leq b \\
    a \leq y
  \end{aligned}
  \right.
  \Leftrightarrow \max(x,a)\leq \min(y,b).
 \end{displaymath}
 Dans ce cas $[x,y]\cap [a,b] = [\max(x,a),\min(y,b)]$.
\begin{demo}
Pour tout réel $u$,
\begin{displaymath}
 u \in [x,y] \cap [a,b]
 \Leftrightarrow
 \left\lbrace
 \begin{aligned}
   x \leq u \leq y \\
   a \leq u \leq b
 \end{aligned}
 \right.
 \Leftrightarrow
   \max(x,a) \leq u \leq \min(y,b) .
 \end{displaymath}
\end{demo}

\begin{defi}[q-cube]\index{q-cube}\label{q-cube}
Pour tout naturel non nul $q$, on appelle $q$-cube un hypercube fermé de côté $\frac{1}{q}$ et de sommets à coordonnées dans $\frac{1}{q}\Z^n$.\newline
Par exemple, pour $a = (a_1, \cdots, a_n) \in \frac{1}{q}\Z^n$, on définit le $q$-cube $Q_a$ par
\begin{displaymath}
 \forall x = (x_1, \cdots, x_n) \in X, \; x \in Q_a  \Leftrightarrow \forall i \in \llbracket 1,n \rrbracket,\; a_i \leq x_i \leq a_i + \frac{1}{q}.
\end{displaymath}
On peut voir aussi $Q_a$ comme un produit cartésien de segments
\begin{displaymath}
 Q_a = [a_1, a_1+\frac{1}{p}] \times \cdots \times [a_n, a_n+\frac{1}{p}].
\end{displaymath}
On note $\mathfrak{C}_q$ l'ensemble des $q$-cubes. On dit aussi cube de taille $\frac{1}{q}$ plutôt que $q$-cube.
\end{defi}
\begin{rems}
 \begin{itemize}
  \item Un $1$-cube est un cube de côté $1$ et de sommets à coordonnées entières.
  \item Pour tout $q$-cube $Q$, il existe un unique $a\in \frac{1}{q}\Z^n$ tel que $Q=Q_a$.
  \item Les $q$-cubes recouvrent $X$. Plus précisément
  \begin{displaymath}
     X = \R^n = \bigcup_{a\in \frac{1}{q}\Z}Q_a = \bigcup_{Q\in \mathfrak{C}_q}Q.
  \end{displaymath}
  \item L'intersection de 2 cubes distincts qui se coupent n'est pas un $q$-cube. Par exemple en dimension $n=3$ c'est une face, une arête ou un sommet. Pour rendre compte de ces intersections, on introduit la notion de cellule.
 \end{itemize}
\end{rems}

\index{cellule de taille $\frac{1}{q}$ et de dimension $d$}
\begin{defi}[q-d-cellule]
 Pour $a = (a_1, \cdots, a_n) \in \frac{1}{q}\Z^n$ et $I$ une partie à $d$ éléments de $\llbracket 1,n \rrbracket$, on définit la $q$-$d$-cellule $C_a(I)$ par
\begin{displaymath}
 \forall x = (x_1, \cdots, x_n) \in X, \; x \in C_a(I)  \Leftrightarrow
 \left\lbrace
   \begin{aligned}
      &\forall i \in I,&\; a_i \leq x_i \leq a_i + \frac{1}{q} \\
      &\forall i \in \llbracket 1,n \rrbracket \setminus I, &\; x_i = a_i
   \end{aligned}
  \right. .
\end{displaymath}
\end{defi}
\begin{rem}
On dira aussi cellule de taille $\frac{1}{q}$ et de dimension $d$ plutôt que $q$-$d$-cellule.\newline
Dans $X=\R^n$, un $q$-cube est une cellule de taille $\frac{1}{q}$ et de dimension $n$. Une de ses arêtes est une cellule de dimension 1 (taille $\frac{1}{q}$). Une face est une cellule de dimension $n-1$. Un singleton dans $\frac{1}{p} \Z^n$ est une cellule de taille $\frac{1}{q}$ et de dimension nulle.
\end{rem}
\begin{propn}
 Lorsque deux cellules de taille $\frac{1}{q}$ distinctes ne sont pas disjointes, leur intersection est une cellule de taille $\frac{1}{q}$.
\end{propn}
\begin{demo}
 Commençons par l'intersection de deux $q$-cubes distincts $Q_a$ et $Q_b$.
 \begin{multline*}
  Q_a \cap Q_b \neq \emptyset
   \Leftrightarrow
  [a_1, a_1+\frac{1}{p}] \times \cdots \times [a_n, a_n+\frac{1}{p}] \cap [b_1, b_1+\frac{1}{p}] \times \cdots \times [b_n, b_n+\frac{1}{p}] \neq \emptyset \\
   \Leftrightarrow
  \forall i \in \llbracket 1,n \rrbracket, \; [a_i, a_i+\frac{1}{p}] \cap [b_i, b_i+\frac{1}{p}] \neq \emptyset
   \Leftrightarrow
  \forall i \in \llbracket 1,n \rrbracket, \; a_i \leq b_i + \frac{1}{q} \text{ et } b_i \leq a_i + \frac{1}{q} \text{ (exercice sur intervalles)} \\
   \Leftrightarrow
  N(b-a) \leq \frac{1}{q}
   \Leftrightarrow
  N(b-a) = \frac{1}{q}
   \Leftrightarrow
  \forall i \in \llbracket 1,n \rrbracket, \; |a_i - b_i| = 0 \text{ ou } \frac{1}{q}.
 \end{multline*}
car $a$ et $b$ appartiennent à $\frac{1}{q}\, \Z^n$. Définissons un $c=(c_1,\cdots,c_n) \in \frac{1}{q}\,\Z^n$ en classant les indices $i$ en trois catégories. Pour tout $i \in \llbracket \rrbracket$:
\begin{align*}
 i \in I & \Leftrightarrow a_i = b_i               &\text{ on pose } c_i = a_i = b_i\\
 i \in J & \Leftrightarrow a_i = b_i + \frac{1}{q} &\text{ on pose } c_i = a_i\\
 i \in K & \Leftrightarrow b_i = a_i + \frac{1}{q} &\text{ on pose } c_i = b_i
\end{align*}
Pour tout $x = (x_1, \cdots, x_n) \in \R^n$:
\begin{displaymath}
 x \in Q_a \cap Q_b \Leftrightarrow
 \left\lbrace
   \begin{aligned}
     &\forall i \in I,&\; a_i \leq x_i \leq a_i + \frac{1}{q} \\
     &\forall i \in J\cup K,&\; x_i = c_i
   \end{aligned}
  \right. .
\end{displaymath}
On en déduit que $Q_a \cap Q_b$ est une cellule de taille $\frac{1}{q}$ et de dimension $\sharp I$.\newline
Considérons maintenant deux cellules $C_a(I)$ et $C_b(J)$.
\begin{displaymath}
 x=(x_1,\cdots,x_n) \in C_a(I) \cap C_b(J)
  \Leftrightarrow
    \left\lbrace
      \begin{aligned}
         &\forall i \in I \cap J,& x_i \in [a_i, a_i+\frac{1}{p}] \cap [b_i, b_i+\frac{1}{p}] \neq \emptyset \\
         &\forall i \in I \setminus J,&  x_i = b_i \in [a_i, a_i+\frac{1}{p}] \\
         &\forall i \in J \setminus I,&  x_i = a_i \in [b_i, b_i+\frac{1}{p}] \\
         &\forall i \in I'\cap J',& x_i = a_i = b_i
      \end{aligned}
    \right.
\end{displaymath}
Pour tous les indices $i$ qui ne sont pas dans $I \cap J$, seule une valeur de $x_i$ est possible. Pour les autres, on est ramené à une intersection de deux cubes dans $\R^d$ avec $d=\sharp I\cap J$.
\end{demo}

\begin{propn}\label{DecompCellule}
 Soit $m=pq$ un multiple de $p$. Toute cellule de taille $\frac{1}{q}$ et de dimension $d$ est une union de cellules de taille $\frac{1}{m}$ et de même dimension (au nombre de $p^d$). En particulier, tout cube de taille $\frac{1}{q}$ est l'union de $p^n$ cubes de taille $\frac{1}{m}$.
\end{propn}
\begin{demo}
En considérant les coordonnées fixées pour une cellule, il suffit de le démontrer pour les cubes.
 Soit $Q = Q_a$ avec $a = (a_1, \cdots, a_n) \in \frac{1}{q}\Z^n$ un $q$-cube quelconque.\newline
 Notons $k=(k_1,\cdots,k_n)\in \llbracket 0, p-1\llbracket^n$ puis $a(k)=(a_1 + \frac{k_1}{m}, \cdots a_n + \frac{k_n}{m})$ et $Q_{a(k)}$ le $m$-cube associé. Alors
 \begin{displaymath}
  Q_a = \bigcup_{k=(k_1,\cdots,k_n)\in \llbracket 0, p-1\llbracket^n}\, Q_{a(k)}.
 \end{displaymath}
\end{demo}

\begin{defi}
  On note $\mathfrak{S}_q$ l'ensemble des unions finies de cellules de taille $\frac{1}{q}$ et $\mathfrak{S} = \bigcup_{q\in \N} \mathfrak{S}_q$.
\end{defi}

\begin{propn}
 Pour tout naturel $q$ non nul, $\mathfrak{S}_q$ est stable pour l'union et l'intersection. C'est un treillis.\newline
 Soit $m$ un multiple de $q$. Alors $\mathfrak{S}_q \subset \mathfrak{S}_m$.
\end{propn}
\begin{demo}
 Conséquence des deux propositions précédentes.
\end{demo}

\noindent On définit le volume dans $\mathfrak{S}$ à partir du cube unité et de son unique décomposition, de l'invariance par translation, de la modularité.
\begin{itemize}
 \item Le volume du cube unité dans $\mathfrak{S}_0$ est 1.
 \item Toute cellule de dimension strictement plus petite que $n$ est de volume nul
 \item Par translation, tous les cubes de taille $\frac{1}{q}$ ont le même volume.
 \item Le cube unité se décompose de manière unique en $q^{n}$ cubes dans $\mathfrak{S}_q$. Par modularité, le volume d'un cube de taille $\frac{1}{q}$ est $\frac{1}{q^{n}}$.
\end{itemize}

\begin{defi}[volume dans l'ensemble des unions finies de cellules]\label{DefVolUnionCell}
Soit $A \in \mathfrak{S}$, il existe $s\in \N$ et un ensemble fini $\mathfrak{A}$ de cellules de taille $\frac{1}{q}$ tels que $A = \bigcup_{Q\in \mathfrak{A}} Q$. On désigne par $\mathfrak{A}_n \subset \mathfrak{A}$ l'ensemble des cubes. On définit le volume $\lambda(A)$ par
\begin{displaymath}
 \lambda(A) = \frac{\sharp \mathfrak{A}_n}{q^{n}}.
\end{displaymath}
\end{defi}
\begin{demo}[Consistence de la définition]
 Si $A$ se décompose en une union de cellules de taille $\frac{1}{q}$ et en une union de cellules de taille $\frac{1}{r}$, les deux valeurs du volume de $A$ sont-elles égales?\newline
 Considérons un multiple commun $m=pq$. D'après la proposition \ref{DecompCellule}, $A$ est une union de cellules de taille $\frac{1}{m}$. Il suffit de montrer que le volume est le même pour $q$ et $m$.\newline
 Notons $\mathfrak{B}_n$ l'ensemble fini des cubes de taille $\frac{1}{m}$ dans la décomposition de $A$ (les cellules de dimension plus petites ne comptent pas pour le volume). D'après la proposition \ref{DecompCellule}, $\sharp \mathfrak{B}_n = p^n \times \sharp \mathfrak{A}_n$. On en déduit
 \begin{displaymath}
  \frac{\sharp \mathfrak{B}_n}{m^{n}} = \frac{p^n \times \sharp \mathfrak{A}_n}{p^n \times q^{n}} = \frac{\sharp \mathfrak{A}_n}{q^{n}} = \lambda(A).
 \end{displaymath}
\end{demo}
\begin{rem}
 Lorsque $A$ est une union finie de cellules de taille $\frac{1}{q}$, son volume est le nombre de cubes de taille $\frac{1}{q}$ \emph{inclus dans } $A$ multiplié par $\frac{1}{q}$.
\end{rem}
\begin{propn}
 La fonction d'ensembles $\lambda$ (volume) définie dans le treillis $\mathfrak{S}$ des unions finies de cellules à valeurs dans $[0,+\infty[$ est isotone (croissante) et modulaire.
\end{propn}
\begin{demo}
 Soit $A$ et $B$ deux unions de cellules de taille $\frac{1}{q}$. Notons $\mathfrak{A}$, $\mathfrak{B}$, $\mathfrak{U}$, $\mathfrak{I}$ les ensembles de cubes que contiennent respectivement $A$, $B$, $A\cup B$, $A\cap B$.
 \begin{align*}
  A \subset B \Rightarrow \mathfrak{A} \subset \mathfrak{B} \Rightarrow \sharp\mathfrak{A} \leq \sharp \mathfrak{B} \Rightarrow& \varphi(A) \leq \varphi(B) \\
  \mathfrak{A}\cup \mathfrak{B} = \mathfrak{U} \Rightarrow& \varphi(A\cup B) = \frac{\sharp(\mathfrak{A}\cup \mathfrak{B})}{q^n} \\
  \mathfrak{A}\cap \mathfrak{B} = \mathfrak{I} \Rightarrow& \varphi(A\cap B) = \frac{\sharp(\mathfrak{A}\cap \mathfrak{B})}{q^n}
 \end{align*}
 en multipliant par $\frac{1}{q^n}$. On conclut avec la modularité de la fonction nombre d'éléments
 \begin{displaymath}
  \sharp(\mathfrak{A}\cup \mathfrak{B})) + \sharp(\mathfrak{A}\cap \mathfrak{B})) = \sharp\mathfrak{A} + \sharp \mathfrak{B}.
 \end{displaymath}
\end{demo}

\subsubsection{Classes de congruences}\label{SubSubSec:ClassesCongru}
Ici $X = \Z$. \index{Exemple arithmétique}
L'ensemble des unions finies de classes de congruence défini au dessous sera désigné dans tout le document par \og Exemple arithmétique\fg.

\begin{defi}
On désigne par $\mathfrak{C}_m \subset \mathcal{P}(\Z)$ l'ensemble des classes de congruences modulo un naturel non nul $m$, par $\mathfrak{S}_m$ l'ensemble des unions de classes modulo $m$, par $\mathfrak{C} = \bigcup_{m \in \N^*}\mathfrak{C}_m$ l'ensemble des classes de congruences et par $\mathfrak{S}$ l'ensemble des unions finies d'éléments de $\mathfrak{C}$.
\end{defi}
\begin{rems}
 \begin{itemize}
  \item Soit $A \subset \Z$,
  \begin{align*}
 A \in \mathfrak{C}  &\Leftrightarrow \exists m\in \N^*,\, \exists a \in \llbracket 0, m \llbracket \text{ tq } A = a + \Z m \\
 A\in \mathfrak{S} &\Leftrightarrow \exists (m_1,\cdots,m_p) \in (\N^*)^p, \exists (a_1,\cdots,a_p)\in \llbracket 0,m_1\llbracket \times \dots \times \llbracket 0,m_p\llbracket \text{ tq }\;
 A = \bigcup_{i=1}^{p}(a_i + \Z m_i)
  \end{align*}
    \item Les ensembles $\mathfrak{C}_m$ et $\mathfrak{S}_m$ sont finis avec $\sharp \mathfrak{C}_m = m, \; \sharp \mathfrak{S}_m = 2^m$.
  \end{itemize}
\end{rems}

\begin{propn} \label{décompoClasse}
 Soit $m\in \N^*$ diviseur de $p\in \N^*$ avec $p=qm$.\newline
 Pour tout $a\in \Z$, $a + p\Z \subset a + m\Z$. Chaque classe modulo $m$ se décompose en $q$ classes modulo $p$.
 \begin{displaymath}
  \left( \forall A\in \mathfrak{C}_m, \;  A = \bigcup_{C \in \mathfrak{C}_p,\, C\subset A} C \right) \Rightarrow \mathfrak{C}_m \subset \mathfrak{S}_p.
 \end{displaymath}
\end{propn}
\begin{demo}
 $a + p \Z = a + qm\Z \subset a + m\Z$. Pour tout $x \in  a + m\Z = A \in \mathfrak{C}_m$, il existe $k \in \Z$ tel que $x = a + km$. Divisons $k$ par $q$, il existe $\lambda \in \Z$ et $r \in \llbracket 0, q\llbracket$ tels que
 \begin{displaymath}
  x = a + (r+\lambda q)m = a+rm + \lambda qm \in a+rm + p \Z = C \in \mathfrak{C}_p \text{ avec } C \subset A.
 \end{displaymath}
 On en déduit $A \subset \bigcup_{C \in \mathfrak{C}_p,\, C\subset A} C$, l'autre inclusion est évidente.
\end{demo}
 \label{ExpleZ}
 \noindent On en déduit que pour tout multiple $q$ de $p$, $\mathfrak{C}_p \subset \mathfrak{S}_q$ donc $\mathfrak{S}_p \subset \mathfrak{S}_q$. En utilisant un multiple commun des modulos des classes, on montre que $\mathfrak{S}= \bigcup_{q \in \N^*}\mathfrak{S}_q$. Autrement dit, toute union finie de classes de congruence se décompose en une union finie de classes modulo \emph{le même} naturel non nul.

 \begin{propn} \label{prop:DecompUnionClasses}
  Soit $A=\bigcup_{i=1}^n(a_i + \Z m_i) \in \mathfrak{S}$ et $p$ un multiple commun aux $m_i$.\newline
  Pour tout $C \in \mathfrak{C}p$, $C \cap A \neq \emptyset \Leftrightarrow C \subset A$. De plus,
  \begin{displaymath}
   A = \bigcup_{C \in \mathfrak{C}_p,\, C\subset A} C = \bigcup_{C \in \mathfrak{C}_p,\, C\cap A \neq \emptyset} C.
  \end{displaymath}
 \end{propn}
 \begin{demo}
  Supposons $C\cap A \neq \emptyset$. Il existe $i$ tel que $a_i + \Z m_i$ contienne un $a \in C$ c'est à dire tel que $a \equiv a_i \mod m_i$. Pour tout $x \in C$:
  \begin{displaymath}
   x \equiv a \mod p \Rightarrow x \equiv a \mod m_i \Rightarrow x \equiv a_i \mod m_i \Rightarrow x \in a_i + \Z m_i \subset A.
  \end{displaymath}
  On en déduit $C \cap A \neq \emptyset$ entraine $C \subset A$. La réciproque est évidente.\newline
  La décomposition d'un élément de $\mathfrak{S}$ est une conséquence de la décomposition d'une classe de congruence. Chaque $a_i + \Z m_i$ se décompose en une union de $C\in \mathfrak{C}_p$ tels que $C \subset a_i + \Z m_i \subset A$. On en déduit $A = \bigcup_{i=1}^n(a_i + \Z m_i) \subset \bigcup_{C \in \mathfrak{C}_p,\, C\subset A} C$, l'autre inclusion est évidente.
 \end{demo}

\begin{defi}[densité arithmétique dans l'ensemble des unions de classes de congruence]\label{Def:DensitClassCongr}
 Soit $A \in \mathfrak{S}$. Il existe $p \in \N^*$ et un ensemble fini $\mathfrak{A}$ de classes de congruence tels que $A = \bigcup_{C \in \mathfrak{A}}C$. On définit la densité arithmétique $\varphi(A)$ par:
 \begin{displaymath}
  \varphi(A) = \frac{\sharp \mathfrak{A}}{p}.
 \end{displaymath}
 En convenant que $\varphi(\emptyset) = 0$.
\end{defi}
\begin{demo}[Consistence de la définition]
Supposons que $A$ se décompose en classes modulo $p$ et en classes modulo $p'$. Considérons un multiple commun $q$. Notons respectivement $\mathfrak{A}_p$, $\mathfrak{A}_{p'}$, $\mathfrak{A}_q$ les ensembles de classes modulo respectivement $p$, $p'$, $q$ qui décomposent $A$. D'après la proposition \ref{décompoClasse}:
\begin{displaymath}
\left\lbrace
  \begin{aligned}
     \sharp \mathfrak{A}_q &= \frac{q}{p}  \, \sharp \mathfrak{A}_p \\
     \sharp \mathfrak{A}_q &= \frac{q}{p'} \, \sharp \mathfrak{A}_{p'}
  \end{aligned}
\right. \Rightarrow
\left\lbrace
 \begin{aligned}
    \frac{\sharp \mathfrak{A}_q}{q} &= \frac{\sharp \mathfrak{A}_p}{p} \\
    \frac{\sharp \mathfrak{A}_q}{q} &= \frac{\sharp \mathfrak{A}_p'}{p'}
 \end{aligned}
\right . \Rightarrow \frac{\sharp \mathfrak{A}_p}{p} = \frac{\sharp \mathfrak{A}_p'}{p'}.
\end{displaymath}
\end{demo}

\begin{rems}
 \begin{enumerate}
  \item  Aucun singleton n'est dans $\mathfrak{C}$ car les modulos sont non nuls. En revanche $\Z \in \mathfrak{C} \subset \mathfrak{S}$ car c'est la classe de $0$ modulo $1$.

  \item Par définition, $\mathfrak{S}$ est stable pour $\cup$. Il est aussi stable par complémentation à cause de la proposition \ref{prop:DecompUnionClasses} et de la partition en classes. Soit $A\in \mathfrak{S}$. Il existe $p$ naturel non nul et $\mathfrak{A}\subset \mathfrak{C}_p$ tels que $A = \bigcup_{C \in \mathfrak{A}} C$. Alors $A' = \bigcup_{C \in \mathfrak{A}'} C$.

  \item De même, lorsque l'intersection de deux éléments de $\mathfrak{S}$ est non vide, c'est un élément de $\mathfrak{S}$. En effet, pour tout $A$ et $B$ dans $\mathfrak{S}$, il existe $p$ naturel non nul, $\mathfrak{A}\subset \mathfrak{C}_p$ et $\mathfrak{B}\subset \mathfrak{C}_p$ tels que
  \begin{displaymath}
   A = \bigcup_{C \in \mathfrak{A}} C, \; B = \bigcup_{C \in \mathfrak{B}} C, \; A\cap B = \bigcup_{C \in \mathfrak{A}\cap \mathfrak{B}} C.
  \end{displaymath}

  \item Pour que l'intersection de deux classes soit toujours dans $\mathfrak{S}$, on impose par définition $\emptyset \in \mathfrak{S}$.
\end{enumerate}
\end{rems}

\begin{prop}
  $\mathfrak{S}$ est une algèbre qui contient $\emptyset$ et $X=\Z$.
\end{prop}
\begin{demo}
 C'est une reformulation des remarques avec le vocabulaire du livre rassemblé en \ref{SystFoncEns} \ref{SystEns}.
\end{demo}

\begin{propn}
 La fonction densité arithmétique de $\mathfrak{S}$ (ensemble des unions de classes de congruence) dans $[0, +\infty]$ est isotone et modulaire.
\end{propn}
\begin{demo}
  Pour toute partie $S\in \mathfrak{S}_p$, notons $\mathfrak{A}(S)$ l'ensemble des $C \in \mathfrak{C}_p$ incluses dans $S$. Alors:
  \begin{displaymath}
   S = \bigcup_{C\in \mathfrak{A}(S)}C, \; \varphi(S) = \sharp \mathfrak{A}(S)\,\frac{1}{p}.
  \end{displaymath}
  Soit $A$ et $B$ des éléments de $\mathfrak{S}$. Il existe $p$ tel que $A$ et $B$ appartiennent à $\mathfrak{S}_p$.\newline
  Si $A \subset B$
  \begin{displaymath}
   \left(\forall C \in \mathfrak{C}_p, \; C\subset A \Rightarrow C \subset B \right)
   \Rightarrow \mathfrak{A}(A) \subset \mathfrak{A}(B)
   \Rightarrow \sharp \mathfrak{A}(A) \leq \sharp \mathfrak{A}(B)
   \Rightarrow \varphi(A) \leq \varphi(B)
  \end{displaymath}
donc $\varphi$ est isotone. D'autre part, pour toute classe $C$ modulo $p$,
  \begin{align*}
   \left( C\subset A \text{ et } C \subset B \right) &\Leftrightarrow C \subset A \cap B \\
   \left( C\subset A \text{ ou } C \subset B \right) &\Leftrightarrow C \subset A \cup B
  \end{align*}
  On en déduit que $\mathfrak{A}(A \cap B)= \mathfrak{A}(A) \cap \mathfrak{A}(B)$ et $\mathfrak{A}(A \cup B)= \mathfrak{A}(A) \cup \mathfrak{A}(B)$. La fonction \emph{nombre d'éléments} ($\sharp$) est modulaire dans l'ensemble des parties finies de $\Z$.
  \begin{multline*}
   \sharp\left(\mathfrak{A}(A) \cap \mathfrak{A}(B)\right) + \sharp\left(\mathfrak{A}(A) \cup \mathfrak{A}(B)\right)
   = \sharp \mathfrak{A}(A) + \sharp \mathfrak{A}(B) \\
   \Rightarrow \sharp\mathfrak{A}(A \cap B) + \sharp\mathfrak{A}(A \cup B) = \sharp \mathfrak{A}(A) + \sharp \mathfrak{A}(B) \\
   \Rightarrow \varphi(A\cap B) + \varphi(A\cup B) = \varphi(A) + \varphi(B)
  \end{multline*}
en multipliant par $\frac{1}{p}$. On déduit que $\varphi$ est modulaire.
\end{demo}
\begin{rem}
  Dans le cas $n=1$, l'espace vectoriel engendré par les fonctions caractéristiques des cubes dyadiques (des segments en l'occurence) est formé de fonctionss en escalier.\newline
  Dans le cas de $\Z$, l'espace engendré par les fonctions caractéristiques des parties appartenant à $\mathfrak{S}$ est exactement l'espace des suites périodiques (définies dans $\Z$).
\end{rem}

\subsection{Approximations}\label{SubSec:Approximations}

\subsubsection{Volume d'une partie bornée ou compacte}\label{SubSubSecc:Volume}
\noindent Voir page 19. On note $\mathfrak{B}$ l'ensemble des parties bornées  de $\R^n$ et $\mathfrak{K} \subset \mathfrak{B}$ l'ensemble des parties compactes. On étend le volume $\lambda$ à $\mathfrak{B}$ et $\mathfrak{K}$ à partir du volume défini dans les unions de cellules. On utilisera exclusivement des cellules de taille $\frac{1}{2^s}$ (essentiellement des cubes).
\begin{defi}[Approximations dyadiques d'une partie bornée]
  Pour toute partie bornée $K$ et tout $s\in \N$, on appelle approximation dyadique à l'ordre $s$ par excès de $K$ la partie $A_s(K)$ définie par
\begin{displaymath}
 A_s(K) = \bigcup_{Q \in \mathfrak{A}_s(K)} Q
\end{displaymath}
en notant $\mathfrak{A}_s(K)$ l'ensemble des cubes $Q_a$ de taille $\frac{1}{2^s}$ tels que $K \cap Q_a \neq \emptyset$.
  \end{defi}

\begin{rems}
 \begin{enumerate}
  \item L'ensemble $\mathfrak{A}_s(K)$ est fini car $K$ est bornée donc $A_s(K) \in \mathfrak{S}_{2^s}$ et c'est une union de cubes seulement (pas besoin de cellules de dimension plus petite).
  \item $K \subset A_s(K)$. En effet
  \begin{displaymath}
    X = \R^n = \bigcup_{a\in \frac{1}{2^s}\Z^n}Q_a \Rightarrow K = K\cap X = \bigcup_{a\in \frac{1}{2^s}\Z^n}(K\cap Q_a)
      = \bigcup_{Q \in \mathfrak{A}_s(K)}(K \cap Q)
      \subset \bigcup_{Q \in \mathfrak{A}_s(K)} Q = A_s(K).
\end{displaymath}

  \item Chaque cube $Q_1$ de taille $\frac{1}{2^{s+1}}$ est inclus dans un cube de taille $\frac{1}{2^s}$ donc
  \begin{displaymath}
   \forall Q_1 \in \mathfrak{A}_{s+1}(K), \exists Q \in \mathfrak{A}_{s}(K) \text{ tq } Q_1 \subset Q.
  \end{displaymath}
On en déduit
\begin{displaymath}
 A_{s+1}(K) \subset A_s(K) \Rightarrow \lambda(A_{s+1}(K)) \leq \lambda(A_s(K)) .
\end{displaymath}
  \item Soit $s \geq k$ entiers naturels et $Q$ un cube de taille $\frac{1}{2^k}$. Examinons $A_s(Q)$.\newline
  Les cubes de taille $\frac{1}{2^s}$ qui coupent $Q$ sont inclus dans $Q$ ou sur le bord. Ils forment un cube dont les arêtes sont de longueur
  \begin{displaymath}
    \frac{1}{2^k} + \frac{2}{2^s} = \frac{1}{2^k}\left( 1 + \frac{1}{2^{s-k-1}} \right)
  \end{displaymath}
  On en déduit
  \begin{displaymath}
   Q \subset A_s(Q), \; Q \neq A_s(Q), \; \lambda_s(Q) = \lambda(A_s(Q)) =  \frac{1}{2^{nk}}(1 + \frac{1}{2^{s-k-1}})^n.
  \end{displaymath}
  \item La remarque précédente montre que $A_s(K)$ \emph{n'est pas le plus petit élément } de $\mathfrak{S}_{2^s}$ contenant $K$. En effet $Q$ est strictement inclus dans $A_s(Q)$ pour un cube $Q$.
 \end{enumerate}
\end{rems}

\begin{defi}[volume d'une partie bornée]
Pour toute partie $K$ bornée, la suite $(\lambda_s(K)) = (\lambda(A_s(K))$ est décroissante et convergente. On note $\lambda(K)$ sa limite appelée volume de $K$.
\begin{displaymath}
  \forall K \in \mathfrak{B}, \; \lambda(K) = \lim_{s\rightarrow +\infty} \lambda_s(K) = \inf\left( \lambda_s(K), s \in \N^*\right).
\end{displaymath}
\end{defi}
\begin{demo}
 Immédiat d'après la remarque 1.
\end{demo}
\begin{rem}
  Aucun cube de taille $\frac{1}{2^s}$ ne coupe $\emptyset$ donc  $\lambda(\emptyset)=0$.
\end{rem}

\begin{propn}
  La fonction $\lambda$ est isotone de $\mathfrak{B}$ dans $[0, + \infty[$.
\end{propn}
\begin{demo}
 La croissance (isotone) est évidente. Pour tous les $K_1 \subset K_2$ bornés, si un cube de taille $\frac{1}{2^s}$ coupe $K_1$, il coupe aussi $K_2$ donc $A_s(K_1) \subset A_s(K_2)$. On termine par passage à la limite dans l'inégalité.
\end{demo}

\begin{propn}
  Pour $n=1$, et $x < y$ réels, $\lambda([x,y]) = y - x$.
\end{propn}
 \begin{demo}
  Pour tout $s$ naturel, quels sont les cubes de taille $\frac{1}{2^s}$ $Q_a$ qui coupent $[x,y]$?\newline
  Soit $k\in \Z$ et $a=\frac{k}{2^s}$. D'après l'exercice sur les intervalles du début du texte,
  \begin{displaymath}
    [x,y] \cap [a, a+\frac{1}{2^s}] \neq \emptyset
    \Leftrightarrow
    \left\lbrace
    \begin{aligned}
       x &\leq \frac{k + 1}{2^s} \\
       \frac{k}{2^s} &\leq y
    \end{aligned}
    \right.
    \Leftrightarrow
    \left\lbrace
    \begin{aligned}
       2^s x -1 &\leq k \\
       k &\leq 2^s y
    \end{aligned}
    \right.
    \Leftrightarrow
    \lceil 2^s x -1 \rceil \leq k \leq \lfloor 2^s y \rfloor .
  \end{displaymath}
Avec les notations de Knuth pour les parties entières supérieures et inférieures. Notons $Z_s$ le nombre de $s$-cubes qui coupent $[x,y]$.
\begin{multline*}
 Z_s = \lfloor 2^s y \rfloor - \lceil 2^s x -1 \rceil + 1 \Rightarrow
 (2^s y-1) - (2^s x -1+1) + 1\leq Z_s \leq (2^s y) - (2^s x -1) + 1 \\
 \Rightarrow
 2^s(y-x) - 2 \leq Z_s \leq 2^s(y-x).
\end{multline*}
Avec $\lambda(A_s([x,y])) = \frac{Z_s}{2^s}$, on obtient $\lambda([x,y])= y-x$ en passant à la limite.
\end{demo}

\begin{propn}
 Soit $n_1$ et $n_2$ naturels non nul, $K_1$, $K_2$ des parties bornées respectivement de $\R^{n_1}$ et $\R^{n_2}$. Le produit cartésien $K_1\times K_2$ est une partie bornée de  $\R^{n_1} \times \R^{n_2}$ et $\lambda(K_1\times K_2)=\lambda(K_1)\lambda( K_2)$.
\end{propn}
\begin{demo}
Notons $X_1=\R^{n_1}$, $X_2=\R^{n_2}$, $X=\R^{n_1 + n_2}$, $\lambda$ la fonction volume dans les trois espaces et $K=K_1 \times K_2$. Pour tout $s$-cube $Q$ de $X$, il existe $Q_1$ et $Q_2$ respectivement cubes de taille $\frac{1}{2^s}$ de $X_1$ et $X_2$ tels que $Q=Q_1 \times Q_2$ (produit cartésien). De plus
\begin{displaymath}
 Q \cap K \neq \emptyset \Leftrightarrow Q_1 \cap K_1 \neq \emptyset \; \mathrm{ et } \; Q_2 \cap K_2 \neq \emptyset .
\end{displaymath}
On en déduit
$\sharp \left\lbrace Q \,\mathrm{tq}\, Q \cap K \neq \emptyset \right\rbrace =
\sharp \left\lbrace Q_1 \,\mathrm{tq}\, Q_1 \cap K_1 \neq \emptyset \right\rbrace
\times
\sharp \left\lbrace Q_2 \,\mathrm{tq}\, Q_2 \cap K_1 \neq \emptyset \right\rbrace$
et
\begin{displaymath}
 A_s(K) = \bigcup_{Q \,\mathrm{tq}\, Q \cap K \neq \emptyset} Q = \bigcup_{Q_1, Q_2 \,\mathrm{tq}\, Q_i \cap K \neq \emptyset} Q_1\times Q_2
 = \left( \bigcup_{Q_1 \,\mathrm{tq}\, Q_1 \cap K \neq \emptyset} Q_1\right) \times \left( \bigcup_{Q_2 \,\mathrm{tq}\, Q_2 \cap K \neq \emptyset} Q_2\right)
 = A_s(K_1) \times A_s(K_2).
\end{displaymath}
puis $\lambda(A_s(K)) = \lambda(A_s(K_1))\times \lambda(A_s(K_2))$ car $\frac{1}{2^{n_1+n_2}}=\frac{1}{2^{n_1}}\times \frac{1}{2^{n_2}}$. On termine en passant à la limite.
\end{demo}
On ne peut rien dire des parties bornées de $X$ qui ne sont pas des produits cartésiens.
\begin{propn}
Pour des réels $a_1 \leq b_1, \cdots , a_n \leq b_n$ :
\begin{displaymath}
 \lambda([a_1,b_1]\times \cdots \times [a_n,b_n]) = (b_1-a_1) \cdots (b_n-a_n).
\end{displaymath}
\end{propn}
\begin{demo}
On combine par récurrence les deux propositions précédentes,
\end{demo}

\begin{propn}\label{prop:VolCell}
 Pour tout réel $z$ fixé et toute partie bornée $K$ de $\R^{n-1} \times \left\lbrace z \right\rbrace$, $\lambda(K\times \left\lbrace z \right\rbrace) = 0$.
\end{propn}
\begin{demo}
Notons $Y = \R^{n-1} \times \left\lbrace z \right\rbrace$. Pour tout $s$ naturel, il existe $a \in \Z \frac{1}{2^s}$ tel que $a \leq z < a+ \frac{1}{2^s}$. Pour tout $s$-cube $Q$ de $Y$, $Q\times [a, a+ \frac{1}{2^s}]$ est un $s$-cube de $X$ contenant $Q\times \left\lbrace z \right\rbrace)$ donc
\begin{displaymath}
A_s(K\times \left\lbrace z \right\rbrace) \subset A_s(K) \times [a, a+ \frac{1}{2^s}]
\Rightarrow
\lambda(A_s(K\times \left\lbrace z \right\rbrace)) \leq \lambda(A_s(K)) \lambda([a, a+ \frac{1}{2^s}])
 = \lambda(A_s(K)) \frac{1}{2^s}.
\end{displaymath}
Pour $s$ à l'infini, le terme de droite tend vers $0$ car $\lambda(A_s(K))\rightarrow \lambda(K)$ et $\frac{1}{2^s}\rightarrow 0$.
\end{demo}

\begin{propn}
 Pour toute cellule de taille $\frac{1}{2^s}$, le volume en tant que partie bornée est égal au volume en tant que cellule c'est à dire $\frac{1}{2^{ns}}$ pour un cube et $0$ pour une cellule de dimension inférieure.
\end{propn}
\begin{demo}
 Pour un cube c'est une conséquence de l'exemple 4 juste avant la définition du volume par la limite des $\lambda(A_{2^s}(K))$. Le volume d'une cellule qui n'est pas un cube est nul à cause de la proposition \ref{prop:VolCell}.
\end{demo}

\begin{explen}\label{exple:VolSommetsBorn}
Notons $C_0$ le cube unité fermé et $P_s$ l'ensemble des points dont les coordonnées sont dans $]0,1[\,\cap\, \Z \frac{1}{2^s}$. C'est la partie finie formée par les $(2^s -1)^n$ sommets intérieurs des cubes de taille $\frac{1}{2^s}$ décomposant le cube unité.\newline
Pour $t$ naturel, examinons $A_t(P_s)$.
  \begin{itemize}
    \item Pour $t \leq s$, les cubes de tailles $\frac{1}{2^t}$ qui coupent $P_s$ sont exactement tous ceux de la décomposition du cube unité en cubes de taille $\frac{1}{2^t}$. Donc $A_t(P_s) = C_0$ et $\lambda(A_t(P_s))=1$ en particulier $\lambda(A_s(P_s))=1$.
    \item Pour $t > s$. Chacun des sommets est entouré par une grappe de $2^n$ cubes de taille $\frac{1}{t}$. Deux grappes distinctes sont disjointes donc $A_t(P_s)$ est formé de $2^n (2^s -1)^n$ cubes de tailles $\frac{1}{2^t}$. On en déduit que
      \begin{displaymath}
  \lambda(A_t(P_s)) = 2^n (2^s -1)^n\, \frac{1}{2^{tn}} \rightarrow 0 \text{ quand } t\rightarrow +\infty.
      \end{displaymath}
  \end{itemize}
Notons $P = \bigcup_{s \in \N^*} P_s$. C'est une partie bornée car incluse dans le cube unité. Quel est son volume ?\newline
Pour tout $\varepsilon >0$, par définition du volume d'une partie bornée, il existe $s$ tel que
\begin{displaymath}
 \lambda(A_s(P))- \varepsilon \leq \lambda(P) \leq 1 \; \text{ (volume du cube unité)}
\end{displaymath}
Or  $1 = \lambda(A_s(P_s))\leq \lambda(A_s(P))$ donc $1 - \varepsilon \leq \lambda(P) \leq 1$.\newline
On en déduit $\lambda(P)=1$ alors que chaque $\lambda(P_s)$ est nul.
\end{explen}

\noindent La propriété précédente du volume n'est pas satisfaisante. Elle est due à la non compacité de la partie $P$. Dans toute la suite la fonction volume ne sera définie que sur les compacts.\newline
On démontrera ( \ref{SystFoncEns} \ref{FoncEns} \ref{Continuites} proposition \ref{ExplePpalModul}) que la fonction $\lambda$ est modulaire sur l'ensemble des compacts.

\subsubsection{Densité arithmétique d'un ensemble d'entiers} \label{SubSubSec:DensitArith}
\begin{defi}[Approximation d'un ensemble d'entiers naturels] Pour toute partie $K$ non vide de $\Z$ et tout $p$ naturel non nul, notons $\mathfrak{A}_p(K)$ l'ensemble des classes de congruence modulo $p$ qui coupent $K$. On appelle approximation $p$-périodique par excès de $K$ la partie $A_p(K)$ définie par
\begin{displaymath}
 A_p(K) = \bigcup_{C \in \mathfrak{A}_p(K)} C \in \mathfrak{S}_p
\end{displaymath}
\end{defi}
\begin{propn}
 L'approximation $p$-périodique $A_p(K)$ est le plus petit élément pour l'inclusion de l'ensemble des éléments de $\mathfrak{S}_p$ qui contiennent $K$.
\end{propn}
\begin{demo}
  \begin{enumerate}
   \item L'union définissant $A_p(K)$ est finie car $\mathfrak{A}_p$ est fini ($p$-classes) donc $A_p(K) \in \mathfrak{S}_p$.
   \item $K$ est inclus dans $A_p(K)$. En effet:
 \begin{displaymath}
  \Z = \bigcup_{C \in \mathfrak{C}_p} C \Rightarrow K = \bigcup_{C \in \mathfrak{C}_p} K\cap C
  = \bigcup_{C \in \mathfrak{A}_p(K)} K\cap C \subset \bigcup_{C \in \mathfrak{A}_p(K)} C \in \mathfrak{S}_p.
 \end{displaymath}
   \item Soit $M \in \mathfrak{S}_p$ contenant $K$. Pour tout classe $C$ modulo $p$,
\begin{displaymath}
 C \in \mathfrak{A}_p(K) \Rightarrow C\cap K \neq \emptyset \Rightarrow C\cap M \neq \emptyset
\end{displaymath}
d'où $A_p(K) \subset M$ car $M = \bigcup_{C\in \mathfrak{C}_p \, C\cap M \neq \emptyset}C$  d'après la proposition \ref{prop:DecompUnionClasses}.
  \end{enumerate}
\end{demo}

\begin{propn}[complété $p$-périodique]
 Soit $K$ une partie de $\Z$ et $p$ un naturel non nul.
 \begin{displaymath}
  A_p(K) = \bigcup_{a\in A}(a + p\Z).
 \end{displaymath}
On peut aussi appeler $A_p(K)$ le \emph{complété $p$-périodique} de $K$.
\end{propn}
\begin{demo}
Notons transitoirement $C_p(K)$ l'union des classes des éléments de $K$. Même si $K$ est infini, cette union est finie car il n'y a que $p$ classes modulo $p$. Donc $C_p(K) \in \mathfrak{S}_p$ et $A_p(K) \subset C_p(K)$.\newline
Pour tout $x \in C_p(K)$, il existe $a \in K$ tel que $x \in a + p\Z = C$. Alors $C$ une classe modulo $p$ qui coupe $K$ donc $C \subset A_p(K)$. On en déduit $C_p(K) \subset A_p(K)$.
\end{demo}

\textbf{Exemple}
Soit $p$ et $q$ deux naturels non nuls. Le complété $p$-périodique d'une classe $(a + q \Z)$ modulo $q$ est $$(a + (p\wedge q) \Z).$$
\begin{demo}
 Notons $p = (p\wedge q)p'$, $q = (p\wedge q)q'$ et utilisons la division par $p'$.\newline
 Pour tout $x\in (a + (p\wedge q) \Z)$, il existe $r \in \llbracket 0, p' \llbracket$ et $\mu \in \Z$ tels que
 \begin{displaymath}
  x = a + (p\wedge q)(r + \mu p') = a + (p\wedge q)r + p \mu \in (a + (p\wedge q)r + p \Z)
 \end{displaymath}
On en déduit que $(a + (p\wedge q) \Z)$ est une union finie de classes modulo $p$. De plus, pour tout $\lambda \in \Z$,\newline
$a+q\lambda = a + (p\wedge q) (q'\lambda) \in (a + (p\wedge q) \Z)$ donc $(a+q\Z)\subset (a+(p\wedge q)\Z)$ puis $A_p(a+q\Z) \subset (a+(p\wedge q)\Z)$.\newline
Réciproquement, pour tout $x \in (a+(p\wedge q)\Z)$, d'après le théorème de Bezout,
\begin{displaymath}
 x-a \in (p\wedge q)\Z \Rightarrow \exists (\lambda, \mu) \in \Z^2 \text{ tq } x-a = \lambda p + \mu q
 \Rightarrow x = (a + \mu q) + \lambda p \in A_p(a + q\Z)
\end{displaymath}
d'après la proposition précédente.
\end{demo}
En particulier, le complété $p$-périodique d'une classe modulo $q$ est $\Z$ lorsque $p$ et $q$ sont premiers entre eux. Dans le cas général, avec $q = (p\wedge q) q'$,
\begin{displaymath}
 \varphi(A_p(a+\Z q)) = \frac{1}{p \wedge q} = \frac{q'}{(p \wedge q)q'} = q' \varphi(a+\Z q).
\end{displaymath}

Cet exemple montre que pour étendre $\varphi$, on ne peut se contenter, comme pour les cubes, de puissances de $2$.

\begin{defi}[Densité arithmétique d'un ensemble d'entiers]
 Soit $K$ une partie de $Z$. On définit $\lambda(K)$ par:
 \begin{displaymath}
  \lambda(K) = \inf\left( \lambda(A_p(K), p\in \N^*)\right).
 \end{displaymath}
\end{defi}

\begin{explen} \label{exple:SuiteUnionClassesCong}
Soit $A = \left\lbrace a_n, n \in\N\right\rbrace$ une partie quelconque de $\Z$ (elle est forcément dénombrable) et $p$ naturel fixé.\newline
Pour tout $n \in \N$, posons $S_n = \bigcup_{k =0}^n \left(a_k + 2^{k+p} \Z\right)$.
 \begin{itemize}
  \item Pour tout $n$, $S_n\in \mathfrak{S}$ avec
  \begin{displaymath}
    \varphi(S_n)\leq \frac{1}{2^p} + \frac{1}{2^{p+1}} + \cdots + \frac{1}{2^{p+2}} \leq 2^{1-p}.
  \end{displaymath}
  \item La suite $(S_n)$ est croissante avec $A \subset \bigcup_{n\in \N}S_n$.
 \end{itemize}
Dans le cas particulier $A=\Z$, notons $S_n'$ le complémentaire de $S_n$.
 \begin{itemize}
  \item Pour tout $n$, $S_n'\in \mathfrak{S}$ avec $\varphi(S_n')\geq 1- 2^{1-p}$.
  \item La suite $(S_n')$ est décroissante avec $\emptyset = \bigcap_{n\in \N}S'_n$ et $\lim \varphi(S_n')\geq 1- 2^{1-p}$.
 \end{itemize}
\end{explen}


\section{Définitions \small{(chap I du livre)}}\label{SystFoncEns}
\subsection{Systèmes d'ensembles}\label{SystEns}
\subsubsection{Treillis, ovale, anneau, algèbre}
Dans le livre, pour un ensemble $X$ donné, toute partie de $\mathcal{P}(X)$ (elle ne contient pas forcément $\emptyset$) est désignée par le terme \emph{système d'ensembles}. Les termes \emph{set system} ou \emph{paving} sont aussi utilisés. Quatre types de systèmes d'ensembles (treillis, ovale, anneau, algèbre), caractérisés par des propriétés de stabilité sont définis. Pour la notion d'ovale, l'ouvrage introduit une opération ternaire inhabituelle.\newline
Soit $X$ un ensemble quelconque et $U$, $V$, $A$ des parties de $X$. On définit
\begin{displaymath}
  U \mid A \mid V = (U \cap A') \cup ( A \cap V).
\end{displaymath}
On rappelle que $A'$ désigne le complémentaire de $A$.
\index{système de parties!treillis}
\begin{defi}
  Soit $\mathfrak{S}$ une partie de $\mathcal{P}(X)$
  \begin{itemize}
    \item $\mathfrak{S}$ est un treillis (lattice) si et seulement si $\mathfrak{S}$ est stable pour l'union et l'intersection.
    \item $\mathfrak{S}$ est un ovale (oval) si et seulement si $U$, $V$, $A$ dans $\mathfrak{S}$ entraine $U \mid A \mid V \in \mathfrak{S}$.\index{système de parties!ovale}
    \item $\mathfrak{S}$ est un anneau (ring) si et seulement si $\mathfrak{S}$ est stable pour l'union, l'intersection et la soustraction. La stabilité pour la soustraction signifie
    \begin{displaymath}
      \forall A, B \in \mathfrak{S}, B \subset A \Rightarrow A \setminus B = A \cap B' \in \mathfrak{S}.
    \end{displaymath}  \index{système de parties!anneau}
    \item $\mathfrak{S}$ est une algèbre (algebra) si et seulement si $\mathfrak{S}$ est stable pour l'union, l'intersection et la complémentation. \index{système de parties!algèbre}
  \end{itemize}
\end{defi}

\begin{propn}\label{prop:ImpTypesSyst}
  algèbre $\Rightarrow$ anneau $\Rightarrow$ ovale $\Rightarrow$ treillis
\end{propn}
\begin{demo}
Par exemple pour montrer qu'un anneau est un ovale, il suffit de remarquer qur
\begin{displaymath}
  U \mid A \mid V = (U \setminus (A \cap U)) \cup (A \cap V).
\end{displaymath}
Pour montrer qu'un ovale est un treillis:
\begin{align*}
  U \mid U \mid V = (U \cap U') \cup (U \cap V) = U \cap V \\
  U \mid V \mid V = (U \cap V') \cup (V \cap V) = U \cup V
\end{align*}
On vérifie facilement les autres implications.
\end{demo}

\begin{rems}
 \begin{enumerate}
  \item Un anneau contient toujours $\emptyset$ car $A \setminus A = \emptyset$.
  \item Un ovale qui contient $\emptyset$ est un anneau. En effet
    \begin{displaymath}
      U \mid A \mid \emptyset = (U \cap A')\cup (U \cap \emptyset) = U \cap A' = U \setminus A.
    \end{displaymath}
    Le fait qu'un anneau soit un ovale particulier (comme pour les figures géométriques) est la seule justification que j'ai trouvée pour le terme \emph{ovale}.
  \item Une algèbre contient toujours $\emptyset$ et $X$.
  \item Un anneau qui contient $X$ est une algèbre. En effet $A' = X \setminus A$.
 \end{enumerate}
\end{rems}
\begin{exples}
 Dans $\R$, l'ensemble des unions finies d'intervalles fermés est un treillis mais ce n'est pas un ovale. Par exemple, si $U = [0,2]$, $A=[1,4]$, $V = [3,5]$:
 \begin{displaymath}
  U|A|V = [0,1[ \, \cup \, [3,4]
 \end{displaymath}
n'est pas une union finie d'intervalles fermés.\newline
L'ensemble des unions finies d'intervalles fermés à gauche et ouverts à droite est un anneau. En effet, si $[x,y[ \subset [a,b[$,
\begin{displaymath}
 [a,b[ \,\setminus \, [x,y[ = [a,x[ \, \cup \, [b,y[.
\end{displaymath}
\end{exples}

\begin{propn}
  Pour tout système d'ensembles $\mathfrak{S}$ de $X$, l'ensemble des treillis (respectivement ovale, anneau, algèbre) contenant $\mathfrak{S}$ admet un plus petit élément pour l'inclusion noté $L(\mathfrak{S})$ (respectivement $O(\mathfrak{S}))$, $R(\mathfrak{S}))$, $A(\mathfrak{S}))$.
\end{propn}
\begin{demo}
Les structures sont définies par des stabilités. L'intersection de tous les treillis contenant $\mathfrak{S}$ vérifie les mêmes stabilités. C'est donc un treillis et il est contenu dans tous les treillis contenant $\mathfrak{S}$. Il en est de même pour les trois autres structures.
\end{demo}
D'après la proposition \ref{prop:ImpTypesSyst},
\begin{displaymath}
 A(\mathfrak{S}) \subset R(\mathfrak{S}) \subset O(\mathfrak{S}) \subset L(\mathfrak{S}).
\end{displaymath}

\subsubsection{Concepts vocabulaire notations}\label{types cardinalité}

\paragraph{Cardinalité}
Le premier concept est relatif à la cardinalité. L'auteur définit des notations très synthétiques avec un symbole $\bullet$ qui peut  désigner un des trois symboles $\star$, $\sigma$, $\tau$ que je ne reprendrai pas. J'utiliserai directement les 3 symboles pour préciser un caractère fini, dénombrable ou quelconque.\newline
Un système d'ensembles $\mathfrak{M}$ de $X$ est dit
\begin{itemize}
 \item de type $*$ si et seulement si il est fini;
 \item de type $\sigma$ si et seulement si il est fini ou dénombrable c'est à dire qu'existe une suite $(S_l)_{l\in \N}$ de parties de $X$ telles que $\mathfrak{M}= \left\lbrace S_l , l\in \N \right\rbrace$;
 \item de type $\tau$ dans tous les autres cas.
\end{itemize}
On peut remarquer que pour une famille de parties: \og type $*$\fg\, entraine \og type $\sigma$ \fg \, entraine \og type $\tau$ \fg.

On peut aussi préfixer des propriétés. Par exemple, pour un système d'ensemble $\mathfrak{S}$ dans $X$;
\begin{align*}
\mathfrak{S} \text{ est $\cup_*$-stable } &\Leftrightarrow \left( \forall \mathfrak{M} \subset \mathfrak{S}, \mathfrak{M} \text{ fini } \Rightarrow \bigcup_{M \in \mathfrak{M}}M \in \mathfrak{S}.\right) \\
\mathfrak{S} \text{ est $\cup_\sigma$-stable } &\Leftrightarrow \left( \forall \mathfrak{M} \subset \mathfrak{S}, \mathfrak{M} \text{ dénombrable } \Rightarrow \bigcup_{M \in \mathfrak{M}}M \in \mathfrak{S}.\right) \\
\mathfrak{S} \text{ est $\cup_\tau$-stable } &\Leftrightarrow \left( \forall \mathfrak{M} \subset \mathfrak{S}, \bigcup_{M \in \mathfrak{M}}M \in \mathfrak{S}.\right)
\end{align*}
On peut remarquer que $\mathfrak{S}$ est $\cup_*$-stable si et seulement si $\mathfrak{S}$ est stable par $\cup$. Il est $\cup_\sigma$-stable si et seulement si, pour toute suite $(M_i)_{i\in \N}$ d'éléments de $\mathfrak{S}$, $\bigcup_{i\in \N}M_i \in \mathfrak{S}$.\newline
On définit de manière analogue les notions de $\cap_\star$-stable(équivalent à $\cap$-stable), $\cap_\sigma$-stable, $\cap_\tau$-stable.
\begin{rem}
 La topologie d'un ensemble $X$ est définie par l'ensemble de ses ouverts (noté $Op(X)$) c'est à dire un système d'ensembles contenant $\emptyset$ et $X$, $\cup_\tau$-stable, $\cap_\star$-stable.
\end{rem}
\begin{nota}
   Soit $\mathfrak{S}$ un système d'ensembles de $X$.\newline
   On note $\mathfrak{S}^{*}$ (respectivement $\mathfrak{S}^{\sigma}$, $\mathfrak{S}^{\tau}$) l'ensemble des $\bigcup_{S \in \mathfrak{M}}S$ où $\mathfrak{M}$ est une partie finie (respectivement dénombrable, quelconque ) de $\mathfrak{S}$.\newline
   On note $\mathfrak{S}_{*}$ (respectivement $\mathfrak{S}_{\sigma}$, $\mathfrak{S}_{\tau}$) l'ensemble des $\bigcap_{S \in \mathfrak{M}}S$ où $\mathfrak{M}$ est une partie finie (respectivement dénombrable, quelconque ) de $\mathfrak{S}$.
\end{nota}

\paragraph{Monotonie}
\begin{defi}
 \begin{itemize}
   \item On note $(S_l)\uparrow$ pour indiquer qu'une suite de parties $S_l$ de $X$ est croissante c'est à dire $S_l \subset S_{l+1}$. De même $(S_l)\downarrow$ pour décroissante.
\index{système de parties! dirigé vers le haut}\index{système de parties! upward directed}
   \item On note $\mathfrak{M}\uparrow$ pour indiquer qu'un système $\mathfrak{M}$ de parties de $X$ est dirigé vers le haut (upward directed) c'est à dire si et seulement si pour tous $U$ et $V$ dans $\mathfrak{M}$, il existe $W\in \mathfrak{M}$ tel que $U \cup V \subset W$.
   \item On note $\mathfrak{M}\downarrow$ pour indiquer qu'un système $\mathfrak{M}$ de parties de $X$ est dirigé vers le bas (downward directed) c'est à dire si et seulement si pour tous $U$ et $V$ dans $\mathfrak{M}$, il existe $W\in \mathfrak{M}$ tel que $W \subset  U \cap V$ .
 \end{itemize}
\end{defi}

\begin{rems}
 \begin{enumerate}
  \item Un système de type $\tau$ stable pour $\cup$ (union) est dirigé vers le haut. Un système de type $\tau$ stable pour $\cap$ (union) est dirigé vers le bas.
  \item Un système $\mathfrak{M}$ de type $\tau$ est dirigé vers le haut si et seulement si toute partie finie de $\mathfrak{M}$ est majorée dans $\mathfrak{M}$. Un système $\mathfrak{M}$ de type $\tau$ est dirigé vers le bas si et seulement si toute partie finie de $\mathfrak{M}$ est minjorée dans $\mathfrak{M}$.
 \end{enumerate}
\end{rems}
\index{système de parties! dirigé vers le bas}\index{système de parties! downward directed}
\begin{defi}
 \begin{enumerate}
  \item On note $\mathfrak{M}\uparrow S$ pour indiquer que $\mathfrak{M}$ est dirigé vers le haut avec $S = \bigcup_{M \in \mathfrak{M}}M$.
  \item On note $\mathfrak{M}\downarrow S$ pour indiquer que $\mathfrak{M}$ est dirigé vers le bas avec $S = \bigcap_{M \in \mathfrak{M}}M$.
 \end{enumerate}
\end{defi}
\noindent Ces notations sont valables pour les $\tau$-systèmes comme pour les suites. Énonçons des propriétés des compacts avec ce vocabulaire.
\begin{exple} \label{systAproxCompact}
 Soit $K$ une partie compacte et $\mathfrak{M} = \left\lbrace K(\delta), \delta >0  \right\rbrace$. Alors $\mathfrak{M} \downarrow K$ Voir \ref{Outils}  \ref{Topologie} proposition  \ref{compactEtendu}
\end{exple}
\begin{demo}
 Le seul point non évident est $\bigcap_{\delta > 0} K(\delta) \subset K$. Soit $x$ dans cette intersection. Pour tout naturel $n>0$,
 \begin{displaymath}
  x \in K(\frac{1}{n}) \Rightarrow \exists x_n \in K \text{ tq } d(x,x_n) < \frac{1}{n}.
 \end{displaymath}
Comme $K$ est compact, on peut extraire de la suite $(x_n)$ d'éléments de $K$ une suite $(x_{\varphi(n)})$ qui converge vers un $a\in K$. On en déduit $d(x,a)=0$ donc $x=a \in K$.
\end{demo}
\begin{propn}\label{FamDecCompacts}
 Soit $\mathfrak{M}\downarrow \emptyset$ un système de parties compactes dirigé vers le bas. Il existe $N \in \mathfrak{M}$ tel que $N = \emptyset$.
\end{propn}
\begin{demo}
Fixons un compact $M\in \mathfrak{M}$ et notons $\mathfrak{N}$ l'ensemble des $N\in \mathfrak{M}$ tels que $N \subset M$. C'est encore un système de parties dirigé vers le bas. Alors
\begin{displaymath}
 M \setminus \left( \bigcup_{N \in \mathfrak{N}} M\setminus N\right)
 =  M \cap \left( \bigcap_{N \in \mathfrak{N}} (M' \cup N)\right)
 =  M \cap \left( M' \cup \bigcap_{N \in \mathfrak{N}}  N\right)
 =  M \cap  \bigcap_{N \in \mathfrak{N}}N
 = \bigcap_{N \in \mathfrak{N}}N
\end{displaymath}
car $M \in \mathfrak{N}$. On en déduit
\begin{displaymath}
 \bigcap_{N \in \mathfrak{N}}N = \emptyset \Rightarrow M = \bigcup_{N \in \mathfrak{N}} M\setminus N.
\end{displaymath}
Les $M\setminus N$ forment un recouvrement du compact $M$ par des parties ouvertes de $M$ car les $N$ sont des fermés. On peut en extraire un recouvrement fini. Il existe $N_1, \cdots, N_p$ tels que
\begin{displaymath}
 M = (M\setminus N_1) \cup \cdots \cup (M\setminus N_p).
\end{displaymath}
Comme $\mathfrak{M}$ est dirigé vers le bas, il existe $N \in \mathfrak{M}$ tel que $N \subset N_1 \cap \cdots N_p$ donc $M \setminus N_i \subset M \setminus N$ pour tous les $i$. On en déduit $M \subset M \setminus N$ donc $N = \emptyset$.
\end{demo}
Cette proposition est une généralisation abstraite du théorème des segments emboîtés: l'intersection d'une suite de segments emboités est un segment non vide.

\paragraph{Stabilités monotones}
\begin{defi}
Pour un système d'ensembles $\mathfrak{S}$ dans $X$, on définit quatre propriétés de stabilités monotones notées $\uparrow \sigma$, $\downarrow \sigma$, $\uparrow \tau$, $\downarrow \tau$.
\begin{align*}
 \mathfrak{S} \text{ vérifie } \uparrow \sigma &\Leftrightarrow
   \left( \text{Pour toute suite } (S_l) \text{ d'éléments de } \mathfrak{S}, (S_l)\uparrow S  \text{ entraine } S \in \mathfrak{S} \right), \\
 \mathfrak{S} \text{ vérifie } \downarrow \sigma &\Leftrightarrow
   \left( \text{Pour toute suite } (S_l) \text{ d'éléments de } \mathfrak{S}, (S_l)\downarrow S  \text{ entraine } S \in \mathfrak{S} \right), \\
 \mathfrak{S} \text{ vérifie } \uparrow \tau &\Leftrightarrow
   \left( \text{Pour tout } \mathfrak{M} \subset \mathfrak{S}, \mathfrak{M}\uparrow S  \text{ entraine } S \in \mathfrak{S} \right), \\
 \mathfrak{S} \text{ vérifie } \downarrow \tau &\Leftrightarrow
   \left( \text{Pour tout } \mathfrak{M} \subset \mathfrak{S}, \mathfrak{M}\downarrow S  \text{ entraine } S \in \mathfrak{S} \right), \\
\end{align*}
\end{defi}
\index{système de parties! $\sigma$ treillis}\index{système de parties! $\sigma$ ovale} \index{système de parties! $\sigma$ anneau} \index{système de parties! $\sigma$ algèbre}
\begin{defi}
\begin{itemize}
 \item Un $\sigma$-treillis est un treillis qui vérifie $\uparrow \sigma$ et $\downarrow \sigma$.
 \item Un $\sigma$-ovale est un ovale qui vérifie $\uparrow \sigma$ et $\downarrow \sigma$.
 \item Un $\sigma$-anneau est un anneau qui vérifie $\uparrow \sigma$ et $\downarrow \sigma$.
 \item Une $\sigma$-algèbre est une algèbre qui vérifie $\uparrow \sigma$ et $\downarrow \sigma$.
\end{itemize}
\end{defi}
\index{tribu}
\begin{rems}
\begin{enumerate}
 \item Une $\sigma$-algèbre est aussi appelée \emph{tribu} en français.
 \item Soit $\mathfrak{S}$ un système de parties de $X$. Pour toute suite $(S_l)$ croissante d'éléments de $\mathfrak{S}$,
   \begin{displaymath}
     (S_l)\uparrow S \Leftrightarrow  S = \bigcup_l S_l.
   \end{displaymath}
  On en déduit que $\mathfrak{S}$ vérifie $\uparrow \sigma$ si et seulement si $\mathfrak{S}$ est $\bigcup - \sigma$-stable si et seulement si $\mathfrak{S}^\sigma = \mathfrak{S}$.
 \item L'intersection d'une famille de système $\uparrow \sigma$ stables (resp $\downarrow \sigma$ stables) est $\uparrow \sigma$ stable (resp $\downarrow \sigma$ stable).
 \item Pour tout système d'ensembles $\mathfrak{S}$, il existe donc un plus petit treillis (resp ovale, anneau, algèbre) contenant $\mathfrak{S}$. Il est noté $L_\sigma(\mathfrak{S})$ (resp $O_\sigma(\mathfrak{S})$, $R_\sigma(\mathfrak{S})$, $A_\sigma(\mathfrak{S})$) et appelé treillis (resp ovale, anneau, algèbre) engendré par $\mathfrak{S}$.
\end{enumerate}
\end{rems}
\index{$\sigma$-algèbre de Borel}\index{tribu borelienne}
\begin{exple}
Lorsque $\mathfrak{S}$ est l'ensemble des ouverts d'un espace topologique $X$, la $\sigma$-algèbre $L(\mathfrak{S})$ engendrée par $\mathfrak{S}$ est appelée $\sigma$-algèbre de Borel ou tribu borelienne.
\end{exple}

\subsection{Fonctions d'ensembles}\label{FoncEns}
\subsubsection{Croissance et modularité}
Page 10. L'auteur considère des fonctions définies dans un treillis $\mathfrak{S}$ d'un ensemble $X$ et à valeurs dans $\overline{\R}= \R \cup\{- \infty, + \infty\} $. On peut étendre l'addition à $\overline{\R}$ de deux manières: en convenant que $(+ \infty) + (-\infty) = + \infty$ ou que $(+ \infty) + (-\infty) = - \infty$ en plus des règles usuelles. Dans les deux cas, l'addition étendue est associative et commutative.

\begin{defi}
  Une fonction $\varphi$ définie dans un treillis $\mathfrak{S}$ à valeurs dans $\overline{\R}$ est dite croissante (isotone) si et seulement si
  \begin{displaymath}
    \forall (A,B) \in \mathfrak{S},\; A \subset B \Rightarrow \varphi(A) \leq \varphi(B).
  \end{displaymath}
\end{defi}
\noindent En général, les fonctions d'ensembles considérées sont croissantes.

\begin{defi}
  Une fonction $\varphi$ définie dans un treillis $\mathfrak{S}$ à valeurs dans $\overline{\R}$ est dite modulaire pour une extension de l'addition si et seulement si
\begin{displaymath}
  \forall (A,B) \in \mathfrak{S}^2, \varphi(A \cup B) + \varphi(A \cap B) = \varphi(A) + \varphi(B)
\end{displaymath}
pour cette extension. De même
\begin{align*}
  \varphi \text{ est sous-modulaire } &\Leftrightarrow \forall (A,B) \in \mathfrak{S}^2, \varphi(A \cup B) + \varphi(A \cap B) \leq \varphi(A) + \varphi(B) \\
  \varphi \text{ est sur-modulaire } &\Leftrightarrow \forall (A,B) \in \mathfrak{S}^2, \varphi(A \cup B) + \varphi(A \cap B) \geq \varphi(A) + \varphi(B)
\end{align*}
\end{defi}

  \noindent Exercice 2.8 (p 13). La modularité dépend vraiment de l'extension choisie.\newline
  On convient de noter $\overset{.}{+}$ l'extension de l'addition vérifiant $(-\infty) \overset{.}{+} (+\infty) = +\infty$ et $\underset{.}{+}$ l'extension de l'addition vérifiant $(-\infty) \underset{.}{+} (+\infty) = -\infty$.
  \begin{enumerate}
    \item Sur $\mathfrak{S} = \mathcal{P}(X)$ où $X$ est un ensemble à deux éléments, définir une fonction $\varphi$ croissante et modulaire pour $\underset{.}{+}$ mais pas sous-modulaire pour $\overset{.}{+}$.
    \item Soit $\varphi$ croissante de $\mathfrak{S}$ dans $\overline{\R}$, montrer que
\begin{displaymath}
  \varphi \text{ sous-modulaire pour } \overset{.}{+} \Rightarrow \varphi \text{ sous-modulaire pour } \underset{.}{+}.
\end{displaymath}
  \end{enumerate}
  \begin{demo}
  \begin{enumerate}
    \item Soit $X=\{a,b\}$ un ensemble à 2 éléments. On définit $\varphi$ dans $\mathcal{P}(X)$ par $\varphi(X) = +\infty$ et $\varphi(A) = - \infty$ pour toutes les autres parties $A$ de $X$. La fonction est bien $\underset{.}{+}$ modulaire car la somme des images par $\varphi$ de 2 parties distinctes sera toujours $-\infty$ sauf si $A=B=X$. En revanche, elle n'est pas $\overset{.}{+}$ sous-modulaire car
    \begin{displaymath}
      \varphi(\{a\}\cup \{b\}) \overset{.}{+} \varphi(\{a\}\cap \{b\}) = (+\infty) \overset{.}{+} (-\infty) = + \infty
    \end{displaymath}
    n'est pas inférieur ou égal à
    \begin{displaymath}
      \varphi(\{a\}) \overset{.}{+} \varphi(\{b\}) = (-\infty) \overset{.}{+} (-\infty) = - \infty.
    \end{displaymath}

    \item On forme un tableau en plaçant dans les deux premières colonnes toutes les situations possibles pour les valeurs de $\varphi(A)$ et $\varphi(B)$ en tenant compte des symétries. On peut remplir beaucoup de cases dans  les autres colonnes en utilisant les conséquences de la croissance et de la sous-modularité pour $\overset{.}{+}$ de $\varphi$. On laisse vide les cases pour lesquelles on ne peut rien déduire.
\begin{center}
\begin{tabular}{lllllll}
$\varphi(A)$ & $\varphi(B)$ & $\varphi(A\cup B)$ & $\varphi(A\cap B)$ & $\varphi(A) \overset{.}{+} \varphi(B)$ & $\varphi(A\cup B) \underset{.}{+} \varphi(A\cap B)$ & $\varphi(A) \underset{.}{+} \varphi(B)$\\ \hline
$-\infty$    & $-\infty$    &                    & $-\infty$          & $-\infty$                              & $-\infty$   & $-\infty$ \\  \hline
$-\infty$    & $\in \R$     & $> -\infty$        & $-\infty$          & $-\infty$                              & $-\infty$   & $-\infty$ \\ \hline
$-\infty$    & $+\infty$    & $+\infty$          & $-\infty$          & $+\infty$                              & $-\infty$   & $-\infty$\\ \hline
$\in \R$     & $\in \R$     & $\in \R$           & $< +\infty$        & $\in \R$                               & $< +\infty$ & $\in \R$\\ \hline
$\in \R$     & $+\infty$    & $+\infty$          & $< +\infty$        & $+\infty$                              & $< +\infty$ & $+\infty$ \\ \hline
$+\infty$    & $+\infty$    & $+\infty$          &                    & $+\infty$                              &             & $+\infty$\\ \hline
\end{tabular}
\end{center}
  \end{enumerate}
  \end{demo}
La comparaison des deux dernières colonnes montre que l'inégalité caractérisant la sous-modularité $\underset{.}{+}$ est toujours vérifiée.\newline
Dans le cas $\varphi(A)$ et $\varphi(B)$ réels, si $\varphi(A\cap B)$ est réel, les 4 termes sont réels, l'addition dans l'inégalité est l'addition habituelle. Si $\varphi(A\cap B) = - \infty$,  $\varphi(A\cup B) \underset{.}{+} \varphi(A\cap B) = -\infty$ donc l'inégalité est vérifiée.\newline
Dans le cas où $\varphi(A)$ et $\varphi(B)$ valent $+\infty$, peu importe la valeur de $\varphi(A\cup B) \underset{.}{+} \varphi(A\cap B)$, elle sera toujours $\leq +\infty$.
Venons en aux formules qui ressemblent au crible de Poincaré (exercie 2.5 du livre). On reprend les notations de la partie I. \ref{criblePoinc}.
\begin{propn}\label{modulaire_ordre_n}
  Soit $\varphi$ une fonction modulaire sur un treillis $\mathfrak{S}$ et $A_1, \cdots , A_p$ dans $\mathfrak{S}$:
  \begin{displaymath}
    \varphi(\bigcup_{i=1}^p A_i) = - \sum_{I \subset \llbracket 1,p \rrbracket, I\neq \emptyset} (-1)^{\sharp I}\varphi(A_I).
  \end{displaymath}
\end{propn}
\begin{demo}
  Pour $p=2$, les parties $I$ intervenant sont $\{1\}$, $\{2\}$ et $\{1,2\}$. la formule à montrer s'écrit
  \begin{displaymath}
    \varphi(A_1 \cup A_2) = - \left( -\varphi(A_1) - \varphi(A_2) + \varphi(A_1\cap A_2)\right)
  \end{displaymath}
qui est la définition de la modularité.\newline
Montrons que la formule à l'ordre $p$ entraine celle à l'ordre $p+1$. Partons de la somme à l'ordre $p+1$ et trions les $I$ : ceux qui ne contiennent pas $p+1$, ceux qui le contiennent entre autres et le singleton $\{p+1\}$:
\begin{align*}
  - \sum_{I \subset \llbracket 1,p+1 \rrbracket, I\neq \emptyset} (-1)^{\sharp I}\varphi(A_I)
  = - \sum_{I \subset \llbracket 1,p \rrbracket, I\neq \emptyset} (-1)^{\sharp I}\varphi(A_I)
  + \sum_{J \subset \llbracket 1,p \rrbracket, J\neq \emptyset} (-1)^{\sharp J}\varphi(A_I \cap A_{p+1})
  + \varphi(A_{p+1}) \\
  = \varphi(\bigcup_{i=1}^p A_i) - \varphi(\bigcup_{i=1}^p A'_i) + \varphi(A_{p+1})
  = \varphi(\bigcup_{i=1}^p A_i) + \varphi(A_{p+1}) -\varphi(\left(\bigcup_{i=1}^p A_i\right) \cap A_{p+1})
  = \varphi(\bigcup_{i=1}^{p+1} A_i)
\end{align*}
en utilisant $A'_i = A_i  \cap A_{p+1}$ pour $i \in \llbracket 1, p \rrbracket$ puis l'hypothèse de récurrence (deux fois) et enfin la définition de la modularité.
\end{demo}
\begin{rem}
  Cette formule fournit une nouvelle démonstration de la formule du crible. En effet dans un ensemble $X$, la fonction de Dirac $\delta_x$ définie par
  \begin{displaymath}
     \forall A \subset X, \;\delta_x(A) =
    \left\lbrace
    \begin{aligned}
      1 &\text{ si } x \in A \\
      0 &\text{ si } x \notin A
    \end{aligned}
    \right.
  \end{displaymath}
  est modulaire. Elle est liée aux fonctions caractéristiques: $\delta_x(A) = \chi_A(x)$. On en déduit
  \begin{displaymath}
    \left( \forall x \in X, \; \delta_x(\bigcup_{i=1}^p A_i) = - \sum_{I \subset \llbracket 1,p \rrbracket, I\neq \emptyset} (-1)^{\sharp I}\delta_x(A_I) \right)
    \Rightarrow  \chi_{\bigcup_{i=1}^p A_i} = - \sum_{I \subset \llbracket 1,p \rrbracket, I\neq \emptyset} (-1)^{\sharp I}\chi_{A_I}.
  \end{displaymath}
\end{rem}

\subsubsection{Extension d'une fonction d'ensembles à un treillis}
Dans cette section l'ouvrage considère une fonction d'ensembles $\varphi$ définie sur un ensemble $\mathfrak{U}$ de parties de $X$ seulement stable pour l'intersection et cherche à la prolonger en une fonction modulaire $\phi$ sur $\mathfrak{S} = L(\mathfrak{U})$ qui est le plus petit treillis contenant $\mathfrak{U}$.

Cette situation est celle du premier exemple où $\mathfrak{U}$ est l'ensemble formé du vide et des classes de congruences autres que $\{0\}$. Cet ensemble est stable par intersection et l'ensemble $\mathfrak{S}$ des unions de classes de congruences est le plus petit treillis contenant $\mathfrak{U}$.
Au départ, la fonction $\varphi$ est définie uniquement sur $\mathfrak{U}$ par  $\varphi(a + \Z m) = \frac{1}{m}$.
Peut-on l'étendre à une fonction modulaire sur $\mathfrak{S}$ ? On l'a fait à l'aide du cardinal des images par les projections canoniques donc je n'ai pas besoin des résultats de cette section pour cet exemple.

Je reproduis quand même ici ces résultats et leurs preuves(pages 27 à 31).

L'ouvrage définit pour tous les $n$ des fonctions notées encore $\varphi$ de $\mathfrak{U}^n$ dans $\R$ inspirées des formules d'inclusion-exclusion
\begin{displaymath}
  \forall n \in \N^*, \forall (A_1,\cdots, A_n) \in \mathfrak{U}^n, \;
  \varphi(A_1, \cdots, A_n) = - \sum_{\emptyset \neq I \subset \llbracket 1 , n\rrbracket}(-1)^{\sharp(I)}\varphi(A_I)
\end{displaymath}
où $A_I$ est défini comme dans la section précédente par $A_I = \bigcap_{i\in I} A_I$.
\begin{rem}
  Ces fonctions sont clairement symétriques, permuter les $A_i$ ne change pas la valeur.
\end{rem}

\begin{prop}
  \begin{enumerate}
    \item Formule de récurrence. Soit $A_0, \cdots, A_r$ des éléments de $\mathfrak{U}$ :
    \begin{displaymath}
      \varphi(A_0,\cdots, A_r) = \varphi(A_0) + \varphi(A_1,\cdots, A_r) - \varphi(A_0\cap A_1, \cdots, A_0\cap A_r).
    \end{displaymath}
    \item Soit $A_0, \cdots, A_r$ des éléments de $\mathfrak{U}$ tels que $A_i \subset A_0$ pour tous les $i$ :
    \begin{displaymath}
      \varphi(A_0,\cdots, A_r) = \varphi(A_0).
    \end{displaymath}
    \item Soit $A_0, \cdots, A_r$ des éléments de $\mathfrak{U}$ tels qu'il existe $l \in \llbracket 1, r \rrbracket$ vérifiant $A_0 \subset A_l$
    \begin{displaymath}
      \varphi(A_0,A_1, \cdots,A_r) = \varphi(A_1, \cdots,A_r).
    \end{displaymath}
    \item Soit $A_1, \cdots, A_r, B_1, \cdots, B_s$ des éléments de $\mathfrak{U}$ :
    \begin{align*}
      \varphi(A_1, \cdots, A_r, B_1, \cdots, B_s) + \varphi(A_1\cap B_1, \cdots, A_r\cap B_s) \\
      = \varphi(A_1,\cdots,A_r) + \varphi(B_1, \cdots, B_s)
    \end{align*}
où l'argument du second terme de la somme à gauche de l'égalité est la suite des $rs$ intersections $A_i \cap B_j$ pour $i \in \llbracket 1,r \rrbracket$ et $i \in \llbracket 1,s \rrbracket$.
  \end{enumerate}
\end{prop}

\begin{demo}
  \begin{enumerate}
    \item On classe les parties $I$ en trois catégories: $\{ 0 \}$, les parties non vides ne contenant pas $0$, celles contenant $0$ et d'autres éléments. Ces dernières sont de la forme $I = \{ 0 \}\cup J$ avec $\emptyset \neq J \subset \llbracket 1, r \rrbracket$ avec $\sharp(J) = \sharp(I) -1$. La décomposition de la somme conduit à la formule.
    \item On applique la première formule avec $A_0 \cap A_i = A_i$.
    \item Par symétrie, on peut supposer $A_0 \subset A_1$. Pour $r = 1$, $A_0 \cap A_1 = A_0)$
    \begin{displaymath}
      \varphi(A_0, A_1) = \varphi(A_0) + \varphi(A_1) - \varphi(A_0) = \varphi(A_1).
    \end{displaymath}
    Pour $r\geq 2$.
    \begin{displaymath}
      \varphi(A_0,A_1, \cdots,A_r) = \varphi(A_0) + \varphi(A_1, \cdots,A_r) - \varphi(A_0,A_0 \cap A_2, \cdots , A_0\cap A_r) = \varphi(A_1, \cdots,A_r)
    \end{displaymath}
    d'après 2.
    \item On procède par récurrence sur $r$. Pour $r=1$ la formule est la même que celle du 1.\newline
    Pour passer de $r$ à $r+1$, on considère $(A_0, \cdots,A_r)$ et la famille des $(r+1)\times s$ intersections transformée par la formule 1 en adjoignant $A_0$.
    \begin{multline*}
      \varphi(A_0\cap B_1, \cdots, A_r \cap B_s) \\
      = \varphi(A_0, A_0\cap B_1, \cdots, A_r \cap B_s) -\varphi(A_0) + \varphi(A_0\cap A_0\cap B_1, \cdots, A_0\cap A_r \cap B_s)\\
      = \varphi \left(
      \begin{aligned}
      &A_0, \\
      &A_0 \cap B_1, \cdots, A_0\cap B_s, \\
      &A_1 \cap B_1, \cdots, A_1\cap B_s, \\
      & \vdots  \\
      &A_r \cap B_1, \cdots, A_r\cap B_s
      \end{aligned}
      \right)
      -\varphi(A_0)
      + \varphi \left(
      \begin{aligned}
        & A_0\cap B_1, &\cdots &, A_0 \cap B_s, \\
        &A_0\cap A_1\cap B_1, &\cdots &, A_0\cap A_1 \cap B_s, \\
        & \vdots \\
        &A_0\cap A_r\cap B_1, &\cdots &, A_0\cap A_r \cap B_s
      \end{aligned}
      \right)
    \end{multline*}
    On utilise la propriété 3 qui permet de supprimer les termes qui ne contribuent pas quand ils sont inclus dans une autre partie de la famille.\newline
    Dans le tableau de gauche, toutes les parties de la deuxième ligne sont incluses dans $A_0$. On peut donc supprimer cette deuxième ligne.\newline
    Dans le tableau de droite, les parties figurant dans une colonne sont incluses dans la partie figurant en haut de la colonne. On peut donc supprimer toutes les lignes sauf la première. On obtient
    \begin{multline*}
      \varphi(A_0\cap B_1, \cdots, A_r \cap B_s)
      = \varphi(A_0, A_1 \cap B_1, \cdots A_r \cap B_s) - \varphi(A_0) + \varphi(A_0\cap B_1, \cdots A_0 \cap B_s) \\
      = \varphi( A_1 \cap B_1, \cdots A_r \cap B_s) - \varphi(A_0 \cap A_1 \cap B_1, \cdots, A_0 \cap A_r \cap B_s) + \varphi(A_0\cap B_1, \cdots A_0 \cap B_s)
    \end{multline*}
    En utilisant encore la formule 1 avec les deux premiers termes. On est alors en mesure d'utiliser deux fois l'hypothèse de récurrence. D'abord avec le premier terme
    \begin{displaymath}
      \varphi( A_1 \cap B_1, \cdots, A_r \cap B_s)
      = \varphi( A_1, \cdots, A_r) + \varphi( B_1, \cdots , B_s) - \varphi( A_1, \cdots, A_r, B_1, \cdots , B_s)
    \end{displaymath}
    puis avec les deux derniers que l'on réécrit d'abord avec $A'_i = A_0 \cap A_i$ pour $i \in \llbracket 1, r \rrbracket$ et $B'_j = A_0 \cap B_j$ pour $j \in \llbracket 1, s \rrbracket$.
    \begin{align*}
      - \varphi( A'_1 \cap B'_1, \cdots,  A'_r \cap B'_s) + \varphi( B'_1, \cdots, B'_s)
      = - \varphi( A'_1, \cdots, A'_r) + \varphi( A'_1, \cdots, A'_r, B'_1, \cdots, B'_s) \\
      = - \varphi( A_0\cap A_1, \cdots, A_0 \cap A_s) + \varphi( A_0 \cap A_1, \cdots, A_0 \cap A_r, A_0 \cap B_1, \cdots, A_0 \cap B_s)\\
      = \varphi(A_0, \cdots, A_r) - \varphi(A_0) - \varphi(A_1, \cdots, A_r)
       - \varphi(A_0, \cdots, A_r,B_1, \cdots, B_s) + \varphi(A_0) \\
       + \varphi(A_1, \cdots, A_r,B_1, \cdots, B_s)
    \end{align*}
    en utilisant encore deux fois la propriété 1 avec $A_0$ en premier. En rassemblant, après simplifications, il reste seulement
    \begin{displaymath}
      \varphi(A_0\cap B_1, \cdots, A_r \cap B_s)
      = \varphi( B_1, \cdots , B_s) + \varphi(A_0, \cdots, A_r) - \varphi(A_0, \cdots, A_r,B_1, \cdots, B_s)
    \end{displaymath}
    qui est bien la formule de récurrence à l'ordre $r+1$.
  \end{enumerate}
\end{demo}
Le principal résultat de cette section est le théorème suivant.
\begin{thm}
  La fonction $\varphi$ de $\mathfrak{U}$ dans $\R$ admet une extension modulaire $\phi$ de $\mathfrak{S}$ dans $\R$ si et seulement si pour chaque $A_1, \cdots,A_p,A$ dans $\mathfrak{U}$ tels que $A_1 \cup \cdots \cup A_p = A$,
  \begin{displaymath}
    \varphi(A_1, \cdots,A_p) = \varphi(A).
  \end{displaymath}
  Nommons $(mod)$ cette condition. Dans ce cas la fonction $\phi$ est définie par
  \begin{displaymath}
    \forall A \in \mathfrak{S}, \phi(A) = \varphi(A_1,\cdots, A_p) \text{ où } A = A_1 \cup \cdots \cup A_p \text{ avec }(A_1,\cdots,A_p) \in \mathfrak{U}^p.
  \end{displaymath}
  De plus $\phi$ est croissante (isotone) si et seulement si, pour tous $A_1, \cdots, A_p, A$ dans $\mathfrak{U}$,
  \begin{displaymath}
    A_1 \cup \cdots \cup A_p \subset A \Rightarrow \varphi(A_1, \cdots, A_p) \leq \varphi(A).
  \end{displaymath}
  Nommons $(isot)$ cette condition.
\end{thm}
\begin{demo}
  À cause de la proposition \ref{modulaire_ordre_n} qui exprime $\varphi(A_1, \cdots, A_p) = \varphi(A_1,\cdots,A_p)$ les deux conditions $(mod)$ et $(isot)$ sont nécessaires.\newline
  Montrons que la condition
  \begin{displaymath}
    \text{(mod)} \; \forall A_1, \cdots,A_p,A \in \mathfrak{U}, A_1 \cup \cdots \cup A_p = A \Rightarrow
    \varphi(A_1, \cdots,A_p) = \varphi(A)
  \end{displaymath}
  permet d'étendre $\varphi$ en $\phi$. Il s'agit de montrer que
  \begin{displaymath}
    A = A_1 \cup \cdots \cup A_p = B_1 \cup \cdots \cup B_p \Rightarrow \varphi(A_1, \cdots, A_p) = \varphi(B_1, \cdots, B_p).
  \end{displaymath}
  Commençons par une conséquence de (mod), pour tous $A_0, A_1, \cdots, A_p \in \mathfrak{U}$:
  \begin{displaymath}
    A_0 \subset A_1 \cup \cdots \cup A_p \Rightarrow \varphi(A_0,A_1, \cdots, A_p) = \varphi(A_1, \cdots, A_p).
  \end{displaymath}
  En effet
  \begin{align*}
    A_0 \subset A_1 \cup \cdots \cup A_p \Rightarrow A_0 = (A_0\cap A_1) \cup \cdots \cup (A_0 \cap A_p) \\
      \Rightarrow \varphi(A_0) = \varphi((A_0\cap A_1) \cup \cdots \cup (A_0 \cap A_p)) \text{ d'après (mod)} \\
      \Rightarrow \varphi(A_0,A_1, \cdots, A_p) - \varphi(A_1, \cdots, A_p) = \varphi(A_0) - \varphi((A_0\cap A_1) \cup \cdots \cup (A_0 \cap A_p) = 0
  \end{align*}
  d'après la propriété 1. Si $A_1 \cup \cdots \cup A_p = B_1 \cup \cdots \cup B_p$ alors chaque $B_i$ est inclus dans l'union des $A_i$ donc, en les ajoutant un par un:
  \begin{displaymath}
    \varphi(A_1, \cdots, A_p) = \varphi(A_1, \cdots, A_p, B_0, \cdots, B_p) = \varphi(B_1, \cdots, B_p).
  \end{displaymath}
  Pour montrer la croissance de $\phi$, il suffit de montrer que pour $A_0, A_1, \cdots, A_p$ dans $\mathfrak{U}$,
  \begin{displaymath}
    \phi(A_1\cup \cdots \cup A_p) \leq \phi(A_0 \cup A_1 \cup \cdots \cup A_p).
  \end{displaymath}
  Or
  \begin{align*}
    \phi(A_0 \cup A_1 \cup \cdots \cup A_p) - \phi(A_1\cup \cdots \cup A_p)
    = \varphi(A_0, \cdots, A_p) - \varphi(A_1, \cdots, A_p)\\
    = \varphi(A_0) - \varphi(A_0\cap A_1, \cdots, A_0\cap A_p) \geq 0
  \end{align*}
d'après l'hypothèse car $(A_0 \cap A_1) \cup \cdots \cup (A_0\cap A_p) \subset A_0$.
\end{demo}


\subsubsection{Régularité} \label{Regularite}
Soit $\varphi$ une fonction isotone d'ensembles de $\mathfrak{S}$ dans $\overline{\R}$.\newline
On se donne 3 systèmes d'ensembles $\mathfrak{M}$, $\mathfrak{S}$, $\mathfrak{T}$ avec $\mathfrak{M} \subset \mathfrak{S}$ et $\mathfrak{T} \subset \mathfrak{S}$. La fonction d'ensembles $\varphi$ est dite extérieurement $\mathfrak{M}$-régulière en $\mathfrak{T}$ si et seulement si
\begin{displaymath}
 \forall S \in \mathfrak{T}, \varphi(S) = \inf\left\lbrace \varphi(M), M \in \mathfrak{M} \text{ avec } S \subset M\right\rbrace.
\end{displaymath}
On dira que $\varphi$ est intérieurement $\mathfrak{M}$-régulière en $\mathfrak{T}$ si et seulement si
\begin{displaymath}
 \forall S \in \mathfrak{T}, \varphi(S) = \sup\left\lbrace \varphi(M), M \in \mathfrak{M} \text{ avec } M \subset S\right\rbrace.
\end{displaymath}
Conventions usuelles: $\inf \emptyset = + \infty$, $\sup \emptyset = - \infty$.\newline
Le cas le plus fréquent est $\mathfrak{T} = \mathfrak{S}$. On dit alors que $\varphi$ est (intérieurement, extérieurement) $\mathfrak{M}$ régulière.

La fonction d'ensembles $\varphi$ est dite
\begin{itemize}
 \item majorée (bounded above) si et seulement si il existe $c\in \R$ tel que $\varphi \leq c$,
 \item finie supérieurement (finite above) si et seulement si $\varphi < +\infty$,
 \item semi finie supérieurement (semifinite above) si et seulement si elle est intérieurement $\left\lbrace \varphi < + \infty\right\rbrace$-régulière.
\end{itemize}
\begin{rems}
 \begin{enumerate}
  \item $\varphi$ semi finie supérieurement si et seulement si pour tout $S \in \mathfrak{S}$,
  \begin{displaymath}
   \varphi(S) = \sup\left\lbrace \varphi(M)\text{ tq } M \subset S, \varphi \text{ finie sur } M \right\rbrace.
  \end{displaymath}
  \item majorée $\Rightarrow$ finie supérieurement $\Rightarrow$ semi finie supérieurement.
 \end{enumerate}
\end{rems}


\subsubsection{Continuités} \label{Continuites}
\index{continuités}\index{continuités!$\sigma$-continue vers le haut}\index{continuités!presque $\sigma$-continue vers le haut}\index{continuités!$\tau$-continue vers le haut}\index{continuités!$\sigma$-continue vers le bas}
Soit $\varphi$ une fonction isotone d'ensembles de $\mathfrak{S}$ dans $\overline{\R}$.
\begin{defi}[$\sigma$-continue vers le haut]
La fonction d'ensembles $\varphi$ est dite $\sigma$-continue vers le haut (upward $\sigma$-continuous) si et seulement si : pour tout $A \in \mathfrak{S}$ et toute suite croissante $(S_l)_{l\in \N}$ d'éléments de $\mathfrak{S}$ qui tend vers $A$, la suite $(\varphi(S_l))$ tend vers $\varphi(A)$. C'est à dire $\varphi(A) = \inf_{l}\varphi(S_l)$.
\end{defi}
\begin{defi}[presque $\sigma$-continue vers le haut]
La fonction d'ensembles $\varphi$ est dite presque $\sigma$-continue vers le haut (almost upward $\sigma$-continuous) si et seulement si : pour tout $A \in \mathfrak{S}$ et toute suite croissante $(S_l)_{l\in \N}$ d'éléments de $\mathfrak{S}$ telle que $\varphi(S_l)> - \infty$ pour tout $l\in \N$, qui tend vers $A$, la suite $(\varphi(S_l))$ tend vers $\varphi(A)$.
\end{defi}
\begin{defi}[$\tau$-continue vers le haut]
 La fonction d'ensembles $\varphi$ est dite $\tau$-continue vers le haut (upward $\tau$-continuous) si et seulement si :
pour tout $A \in \mathfrak{S}$ et tout système d'ensembles $\mathfrak{M} \subset \mathfrak{S}$ tel que $\mathfrak{M} \uparrow A$, on a $\sup_{S \in \mathfrak{M}}\varphi(S) = \varphi(A)$.
\end{defi}
On définit de même les notions de continuité vers le bas. Par exemple
\begin{defi}[$\sigma$-continue vers le bas]
La fonction d'ensembles $\varphi$ est dite $\sigma$-continue vers le bas (downward $\sigma$-continuous) si et seulement si : pour tout $A \in \mathfrak{S}$ et toute suite décroissante $(S_l)_{l\in \N}$ d'éléments de $\mathfrak{S}$ qui tend vers $A$, la suite $(\varphi(S_l))$ tend vers $\varphi(A)$.
\end{defi}
\index{continuités!$\tau$-continue vers le bas}
\begin{defi}[$\tau$-continue vers le bas]
 La fonction d'ensembles $\varphi$ est dite $\tau$-continue vers le bas (downward $\tau$-continuous) si et seulement si :
pour tout $A \in \mathfrak{S}$ et tout système d'ensembles $\mathfrak{M} \subset \mathfrak{S}$ tel que $\mathfrak{M} \downarrow A$, on a $\inf_{S \in \mathfrak{M}}\varphi(S) = \varphi(A)$.
\end{defi}

\begin{propn}\label{prop:contBssicontH}
 Pour une fonction d'ensembles $\varphi$ isotone, modulaire, définie dans un anneau $\mathfrak{S}$ et à valeurs dans $[0,+\infty]$, $\varphi$ est $\sigma$-continue vers le haut si et seulement si $\varphi$ est $\sigma$-continue vers le bas.
\end{propn}
\begin{demo}
 Supposons que $\varphi$ soit $\sigma$-continue vers le haut est considérons une suite $(S_l)\downarrow S \in \mathfrak{S}$. Alors $S = \bigcap_l S_l \subset S_l$ pour tous les $l$. Introduisons
 \begin{displaymath}
  D_l = S_1|S_l|S \in \mathfrak{S}.
 \end{displaymath}
Alors $D_l = (S_1 \setminus S_l)\, \cup (S_l \cap S) = (S_1 \setminus S_l)\, \cup \,  S.$ donc $(D_l)\uparrow S_1$. De plus $D_l \cup S_l = S_1$ et $D_l \cap S_l = S$ donc par modularité,
\begin{displaymath}
 \varphi(S_l) + \varphi(D_l) = \varphi(S) + \varphi(S_1).
\end{displaymath}
Comme $\varphi$ est $\sigma$-continue vers le haut, $(\varphi(D_l))\uparrow \varphi(S_1)$ entraine $(\varphi(S_l))\downarrow \varphi(S)$. Ceci montre que $\varphi$ est continue vers le bas.\newline
Supposons que $\varphi$ soit $\sigma$-continue vers le bas est considérons une suite $(S_l)\uparrow S \in \mathfrak{S}$. Alors $S = \bigcup_l S_l$ donc $ S_l \subset S$ pour tous les $l$. Introduisons
 \begin{displaymath}
  D_l = S \mid S_l \mid S_1 \in \mathfrak{S}.
 \end{displaymath}
 Alors $D_l = (S \setminus S_l)\, \cup (S_l \cap S_1) = (S \setminus S_l)\, \cup \,  S_1$ donc $(D_l)\downarrow S_1$. De plus $D_l \cup S_l = S$ et $D_l \cap S_l = S_1$ donc par modularité,
\begin{displaymath}
 \varphi(S_l) + \varphi(D_l) = \varphi(S) + \varphi(S_1).
\end{displaymath}
Comme $\varphi$ est $\sigma$-continue vers le bas, $(\varphi(D_l))\downarrow \varphi(S_1)$ entraine $(\varphi(S_l))\uparrow \varphi(S)$. Ceci montre que $\varphi$ est continue vers le haut.
\end{demo}

\begin{propn}
 La fonction volume $\lambda$ définie dans l'ensemble des parties bornées de $\R^n$ n'est pas $\sigma$-continue vers le haut
\end{propn}
\begin{demo}
 On reprend l'exemple \ref{exple:VolSommetsBorn} de \ref{Sec:Exples}\ref{SubSec:Approximations}\ref{SubSubSecc:Volume} où $P_s$ est l'ensemble des points à coordonnées dans $]0,1[ \cap \Z\, \frac{1}{2^s}$ et $S_l = \bigcup_{s=0}^l P_s$. Ce sont des parties bornées telles que $(S_l)\uparrow P = \bigcup_{s\geq0} P_s$. Pour chaque $s$, $\lambda(P_s)=0$ donc $\lambda(S_l)=0$ alors que $\lambda(P) = 1$ donc $(\lambda(S_l))$ ne tend pas vers $\lambda(P)$.
\end{demo}

\begin{propn}[Exemple arithmétique]
 La fonction densité arithmétique $\varphi$ définie dans l'ensemble $\mathfrak{S}$ des unions finies de classes de congruence n'est pas $\sigma$-continue vers le haut.
\end{propn}
\begin{demo}
 Soit $A = \left\lbrace a_k, k\in \N\right\rbrace \in \mathfrak{S}$ non vide et $\mu\geq 2$ tel que $A$ soit une union disjointe de classes modulo $\mu$. Pour $p\in \N$ arbitraire, considérons la suite dans l'exemple \ref{exple:SuiteUnionClassesCong} de \ref{Sec:Exples}\ref{SubSec:Approximations}\ref{SubSubSec:DensitArith}.
\begin{displaymath}
 \forall n \in \N, \; S_n = \bigcup_{k =0}^n \left(a_k + \mu^{k+p} \Z\right) \in \mathfrak{S}.
\end{displaymath}
C'est une suite croissante d'éléments de $\mathfrak{S}$ telle que $A = \bigcup_{n\in \N}S_n$ c'est à dire $(S_n)\uparrow A$ avec
\begin{displaymath}
 \varphi(S_n) \leq \sum_{k\geq 0} \frac{1}{\mu^{k+p}} = \frac{\mu^{1-p}}{\mu - 1}
\end{displaymath}
donc $\lim (S_n)\leq \mu^{1-p}$. En choisissant $p$ assez grand pour avoir $\mu^{1-p} < \varphi(A)$, on forme un contre exemple à la définition.
\end{demo}
\begin{rem}
 D'après la proposition \ref{prop:contBssicontH}, la fonction densité arithmétique n'est pas non plus $\sigma$-continue vers le bas.
\end{rem}

\begin{propn}[Exemple principal]
 La fonction d'ensembles $\lambda$ définie dans l'ensemble $\mathfrak{K}$ des parties compactes de $X=\R^n$ est $\tau$-continue vers le bas.
\end{propn}
\begin{demo}
Soit $K$ une partie compacte et $\mathfrak{M}$ un système de parties compactes dirigé vers le bas (downward directed) vérifiant $\mathfrak{M} \downarrow K$.\newline
Rappelons que dirigé vers le bas  signifie que, pour $A$ et $B$ appartenant à $\mathfrak{M}$, il existe $C\in \mathfrak{M}$ tel que $C \subset A \cap B$. On a aussi par hypothèse $\bigcap_{M \in \mathfrak{M}}M = K$.\newline
On doit montrer $\inf_{M \in \mathfrak{M}} \lambda(M) = \lambda(K)$.\newline
De $K \subset M$ pour tous les $M \in \mathfrak{M}$, on déduit $\lambda(K) \leq \lambda(M)$ donc $\lambda(K) \leq \inf_{M \in \mathfrak{M}}\lambda(M)$.\newline
Il reste à montrer $\inf_{M \in \mathfrak{M}}\lambda(M) \leq \lambda(K)$.\newline
Formons une approximation \emph{ouverte} de $K$.\newline
Considérons des naturels $0 \leq s < t$ et l'approximation fermée à l'ordre $s$:
\begin{displaymath}
 K \subset A_s(K) = \bigcup_{Q\in \mathfrak{M}_s \, Q\cap K \neq \emptyset}Q.
\end{displaymath}
Pour chaque $s$-cube $Q$, formons un $t$-cube $Q^*$ juste un peu plus grand. Plus précisément, $Q$ est le produit cartésien de $n$ intervalles de longueur $\frac{1}{2^s}$.  Pour chacun de ces intervalles, ajoutons un intervalle de longueur $\frac{1}{2^t}$ de chaque côté et notons $Q^*$ le $t$-cube produit cartésien de $n$ intervalles de longueur $\frac{1}{2^s}+ \frac{2}{2^t}$. Alors:
\begin{displaymath}
 Q \subset \mathrm{Int}Q^* \subset Q^*, \; \lambda(Q^*) = \left( \frac{1}{2^s}+ \frac{2}{2^t}\right)^n = \lambda(Q)\left( 1 + \frac{1}{2^{t-s-1}}\right)^n
\end{displaymath}
\begin{displaymath}
 K \subset A_s(K) = \bigcup_{Q\in \mathfrak{M}_s \, Q\cap K \neq \emptyset}Q
            \subset O_{s,t}(K) = \bigcup_{Q\in \mathfrak{M}_s \, Q\cap K \neq \emptyset} \mathrm{Int} Q^*.
\end{displaymath}
où $O_{s,t}(K)$ est une partie bornée et ouverte.\newline
Remarquons que $\frac{\lambda(Q^*)}{\lambda(Q)}$ est constant. On en déduit
\begin{displaymath}
 \lambda(O_{s,t}(K)) \leq \lambda\left( \bigcup_{Q\in \mathfrak{M}_s \, Q\cap K \neq \emptyset} \mathrm{Int} Q^*\right)
 = \lambda(A_s(K)) \left( 1 + \frac{1}{2^{t-s-1}}\right)^n.
\end{displaymath}

On utilise maintenant une propriété des espaces compacts. On ne peut raisonner de cette manière pour les parties seulement bornées.\newline
Pour chaque $M\in \mathfrak{M}$, enlevons le complémentaire de l'ouvert. Les parties $M \cap O_{s,t}(K)'$ sont compactes et vérifient
\begin{displaymath}
 \bigcap_{M \in \mathfrak{M}} \left(M \cap O_{s,t}(K)'\right)
 = \left(\bigcap_{M \in \mathfrak{M}} M\right) \cap O_{s,t}(K)'
 = K \cap O_{s,t}(K)'
 = \emptyset
\end{displaymath}
car $K \subset O_{s,t}(K)$.\newline
D'après la proposition \ref{FamDecCompacts}, si l'intersection d'un système de compacts dirigé vers le bas est vide alors un des compacts de la famille est vide.\newline
Pour tous les $s$ et $t>s$, il existe donc $M \in \mathfrak{M}$ tel que
\begin{multline*}
 M \cap O_{s,t}(K)'=\emptyset
 \Rightarrow M \subset O_{s,t}(K) \\
  \Rightarrow
  \inf_{M \in \mathfrak{M}}\lambda(M) \leq \lambda(M) \leq  \lambda(O_{s,t}(K)) \leq \lambda(A_s(K)) \left( 1 + \frac{1}{2^{t-s-1}}\right)^n \\
  \Rightarrow
  \inf_{M \in \mathfrak{M}}\lambda(M) \leq \lambda(A_s(K)) \; \text{ (limite en $t$)}
  \Rightarrow
  \inf_{M \in \mathfrak{M}}\lambda(M) \leq \lambda(K) \; \text{ (limite en $s$)}.
\end{multline*}
\end{demo}

 \begin{propn}{Exemple principal}\label{ExplePpalModul}
  La fonction $\lambda$ est modulaire de $\mathfrak{K}$ dans $[0, + \infty[$.
 \end{propn}
 \begin{demo}
 On se ramène à la modularité du cardinal pour les ensembles finis de cubes de taille $\frac{1}{2^s}$. Soit $K_1$ et $K_2$ des parties bornées. Définissons des ensembles finis $\mathfrak{U}_1$ et $\mathfrak{U}_2$ de cubes de taille $\frac{1}{2^s}$.
 \begin{displaymath}
  \left.
  \begin{aligned}
    Q \in \mathfrak{U}_1 &\Leftrightarrow Q \cap K_1 \neq \emptyset \\
    Q \in \mathfrak{U}_2 &\Leftrightarrow Q \cap K_2 \neq \emptyset
  \end{aligned}
  \right\rbrace \Rightarrow
  \left\lbrace
  \begin{aligned}
   Q \in \mathfrak{U}_1\cap \mathfrak{U}_2 &\Leftrightarrow Q \cap K_1 \neq \emptyset \text{ et } Q \cap K_2 \neq \emptyset \\
   Q \in \mathfrak{U}_1\cup \mathfrak{U}_2 &\Leftrightarrow Q \cap K_1 \neq \emptyset \text{ ou } Q \cap K_2 \neq \emptyset \Leftrightarrow Q\cap(K_1 \cup K_2) \neq \emptyset
  \end{aligned}
  \right.
 \end{displaymath}
Attention, $Q\cap(K_1\cap K_2) \neq \emptyset$ entraine $Q \cap K_1 \neq \emptyset$ et $Q \cap K_2 \neq \emptyset$ mais la réciproque est fausse. On en déduit
\begin{displaymath}
 \sharp \left\lbrace Q \text{ tq } Q\cap(K_1\cap K_2) \neq \emptyset\right\rbrace
 \leq \sharp (\mathfrak{U}_1\cap \mathfrak{U}_2)
 = \sharp \mathfrak{U}_1 + \sharp \mathfrak{U}_2 - \sharp (\mathfrak{U}_1\cup \mathfrak{U}_2).
\end{displaymath}
En multipliant par $\frac{1}{2^{ns}}$ qui est le volume des cubes de taille $\frac{1}{2^s}$, on obtient
\begin{displaymath}
 \lambda(A_s(K_1\cap K_2))  \leq V_s = \lambda(A_s(K_1)) + \lambda(A_s(K_2)) - \lambda(A_s(K_1\cup K_2))
\end{displaymath}
en notant $V_s = \frac{\sharp (\mathfrak{U}_1\cap \mathfrak{U}_2)}{2^{ns}}$ puis, en passant à la limite en $s$,
\begin{displaymath}
 \lambda(K_1 \cap K_2) \leq V = \lambda(K_1) + \lambda(K_2) - \lambda(K_1 \cup K_2)
\end{displaymath}
en notant $V$ la limite de la suite $(V_s)$.\newline
Revenons sur la condition $Q$ est un cube de taille $\frac{1}{2^s}$ qui coupe $K_1$ et $K_2$: il existe $x_1\in Q \cap K_1$ et $x_2 \in Q \cap K_2$. Comme $x_1$ et $x_2$ sont dans le même $Q$, en désignant par $N$ la norme infinie (max des valeurs absolues des coordonnées), il vient $N(x_1-x_2)\leq \frac{1}{2^s}$. \newline
Pour $\delta \geq \frac{1}{2^s}$ notons $K_1(\delta)$ l'ensemble des $y$ pour lesquels il existe $y_1\in K_1$ tel que $N(y-y_1)\leq \delta$. On peut alors reformuler
\begin{displaymath}
 N(x_1-x_2)\leq \frac{1}{2^s} \Rightarrow x_2 \in K_1(\delta)\cap K_2.
\end{displaymath}
puis
\begin{displaymath}
 \mathfrak{U}_1 \cap \mathfrak{U}_2 \subset
 \left\lbrace Q \text{ tq } Q\cap (K_1(\frac{1}{2^s})\cap K_2 )\neq \emptyset \right\rbrace
 \Rightarrow
 V_s \leq \lambda(A_s(K_1(\delta)\cap K_2)).
\end{displaymath}
Pour chaque $\delta >0$ fixé, $\frac{1}{2^s}\leq \delta$ pour $s$  assez grand. On peut donc passer à la limite en $s$:
\begin{displaymath}
 \forall \delta > 0, \; \lambda(K_1 \cap K_2) \leq  \lambda(K_1) + \lambda(K_2) - \lambda(K_1 \cup K_2) = V \leq \lambda(K_1(\delta)\cap K_2).
\end{displaymath}
Le système de parties compactes $\left\lbrace K_1(\delta)\cap K_2, \delta > 0 \right\rbrace$ est orienté vers le bas et d'intersection $K_1 \cap K_2$. (voir \ref{SystFoncEns} \ref{FoncEns} \ref{compactEtendu} \ref{systAproxCompact}). Comme $\lambda$ est $\tau$-continue vers le bas sur $\mathfrak{K}$,
\begin{displaymath}
 \inf\left\lbrace \lambda(K_1(\delta)\cap K_2), \delta > 0 \right\rbrace =  \lambda(K_1 \cap K_2)
 \Rightarrow
 \lambda(K_1 \cap K_2) \leq  \lambda(K_1) + \lambda(K_2) - \lambda(K_1 \cup K_2) = V \leq \lambda(K_1 \cap K_2).
\end{displaymath}
\end{demo}


\subsubsection{Contenus et mesures} \label{ContenusMesures}
\begin{defi}
Un \emph{contenu conventionnel} (conventional content) est une fonction d'ensembles définie dans un anneau $\mathfrak{S}$ à valeurs dans $[0,+\infty]$ modulaire et vérifiant $\varphi(\emptyset)=0$.
\end{defi}
\noindent On en déduit qu'elle est isotone (croissante). L'ouvrage de référence (p 14) définit une notion plus générale de \emph{contenu} dans un ovale à valeurs dans $\overline{\R}$.

\begin{defi}
Une \emph{mesure conventionnelle} (conventional measure) est un contenu conventionnel presque $\sigma$-continu vers le haut et presque $\sigma$-continu vers le bas.
\end{defi}

\begin{rems}
 \begin{enumerate}
  \item L'ouvrage de référence définit dans un ovale une notion plus générale de mesure.
  \item D'après la proposition \ref{prop:contBssicontH}, une seule  continuité suffit car les deux sont équivalentes pour un anneau.
  \item La fonction densité arithmétique définie dans l'ensemble des unions finies de classes de congruences \emph{n'est pas une mesure} car elle ne possède pas de propriété de $\sigma$-continuité.
  \item Une mesure conventionnelle $\varphi$ possède une propriété de $\sigma$-additivité au sens suivant.\newline
  Soit $(A_l)_{l \in \N}$ une suite de parties disjointes appartenant à $\mathfrak{S}$ telle que $A = \bigcup_l A_l \in \mathfrak{S}$. Alors
  \begin{displaymath}
   \varphi(A) = \sum_{k\geq 0} \varphi(A_k).
  \end{displaymath}
En effet $(S_l)\uparrow A$ avec $S_l = \bigcup_{k=0}^l A_k$. Donc $(\varphi(S_l))\uparrow \varphi (A)$ car $\varphi$ est $\sigma$-continue vers le haut. On conclut avec la modularité de $\varphi$:
\begin{displaymath}
 \varphi(S_l) = \sum_{k=0}^{l} \varphi(A_k).
\end{displaymath}
 \end{enumerate}
\end{rems}

\section{Extensions fondées sur la régularité \small{(chap II du livre)}}\label{ExtenRegul}
Ce chapitre est le coeur du livre. À partir d'une fonction $\varphi$ isotone d'ensembles de $\mathfrak{S}$ dans $\overline{\R}$, on définit
\begin{enumerate}
 \item des enveloppes extérieures $\varphi^*$, $\varphi^\sigma$, $\varphi^\tau$ définies dans $\mathcal{P}(X)$ tout entier;
 \item la classe de Carathéodory $\mathfrak{C}(\phi)$ pour une fonction d'ensemble $\Phi$ définie dans $\mathcal{P}(X)$ tout entier.
\end{enumerate}
Sous certaines conditions, la restriction d'une extension de $\varphi$ à sa classe de Carathéodory possède de bonnes propriétés, en particulier la classe de Carathéodory peut être une algèbre.

\subsection{Enveloppes}\label{Enveloppes}
\subsubsection{Enveloppes extérieures}
Dans ce paragraphe, $\mathfrak{S}$ est un treillis dans $\mathcal{P}(X)$ et $\varphi$ une fonction d'ensembles isotone de $\mathfrak{S}$ dans $\overline{\R}$. On définit dans $\mathcal{P}(X)$ les trois enveloppes extérieures $\varphi^*$ (enveloppe extérieure brute), $\varphi^\sigma$, $\varphi^\tau$ par:
\begin{displaymath}
 \forall A \in  \mathcal{P}(X):
 \left\lbrace
 \begin{aligned}
    \varphi^*(A) &= \inf \left\lbrace \varphi(S), S \in \mathfrak{S} \text{ avec } A \subset S \right\rbrace \\
    \varphi^\sigma(A) &= \inf \left\lbrace \lim_{l}  \varphi(S_l), \forall l \, S_l\in \mathfrak{S} \text{ avec } (S_l) \uparrow \supset A \right\rbrace \\
    \varphi^\tau(A) &= \inf \left\lbrace \sup_{S \in \mathfrak{M}} \varphi(S), \mathfrak{M} \subset \mathfrak{S} \text{ avec } \mathfrak{M}\uparrow \supset A\right\rbrace
 \end{aligned}
 \right.
\end{displaymath}
Voir \ref{types cardinalité}
\begin{prop}[Exemple arithmétique]
 Pour le couple $\mathfrak{S}, \varphi$ de l'exemple arithmétique, $\varphi^\sigma$ est la fonction constante nulle.
\end{prop}
\begin{demo}
 Pour tout partie $A = \left\lbrace a_k , k \in \N\right\rbrace$ de $\Z$ et tout $p\in \N$, considérons la suite de l'exemple 3 de \ref{Sec:Exples}\ref{ExplesSuitesCongru} .
 \begin{displaymath}
  \forall n \in \N, \; S_n = \bigcup_{k =0}^n \left(a_k + 2^{k+p} \Z\right) .
 \end{displaymath}
 C'est une suite croissante d'éléments de $\mathfrak{S}$ telle que $A \subset \bigcup_{n\in \N}S_n$ et $\lim (S_n) \leq 2^{1-p}$. Comme $p$ est arbitraire, la borne inférieure des limites est nulle.

\end{demo}

\begin{prop}
Soit $\mathfrak{S}$ un treillis dans $\mathcal{P}(X)$ et $\varphi$ une fonction d'ensembles isotone de $\mathfrak{S}$ dans $\overline{\R}$.
 \begin{enumerate}
  \item  La restriction de $\varphi^*$ à $\mathfrak{S}$ est $\varphi$.
  \item Sur $\mathcal{P}(X)$, $\varphi^\tau \leq \varphi^\sigma \leq \varphi^*$.
  \item Les fonctions d'ensembles $\varphi^*$, $\varphi^\sigma$ et $\varphi^\tau$ sont isotones (croissantes) dans $\mathcal{P}(X)$.
 \end{enumerate}
\end{prop}
\begin{demo}
 \begin{enumerate}
  \item Soit $A \in \mathfrak{S}$, alors $\varphi(A)= \min \left\lbrace \varphi(S), S \in \mathfrak{S} \text{ avec } A \subset S \right\rbrace = \varphi^*(A)$.
  \item \begin{itemize}
         \item Soit $A \subset X$ et $S$ quelconque dans $\mathfrak{S}$ avec $A \subset S$. La suite constante $(S_l)$ avec $S_l = S$ pour tous les $l$ vérifie $(S_l) \uparrow \supset A$. Donc $\varphi^\sigma(A) \leq \varphi(S)$. On en déduit que $\varphi^\sigma(A)$ est un minorant de $\left\lbrace \varphi(S), S \in \mathfrak{S} \text{ avec } A \subset S \right\rbrace$ donc $\varphi^\sigma(A) \leq \varphi^*(A)$.
        \item Soit $A \subset X$ et $(S_l)_{l\in \N}$ n'importe quelle suite d'éléments de $\mathfrak{S}$ vérifiant $(S_l) \uparrow \supset A$. Pour cette suite, formons l'ensemble de ses valeurs $\mathfrak{M}= \left\lbrace S_l, l\in \N \right\rbrace$. C'est bien un système d'ensembles croissant (upward directed) car pour des naturels $l$ et $m$, on peut considérer $n = \max(l,m)$ et, par croissance $S_l \cup S_m \subset S_n$. On en déduit $\mathfrak{M}\uparrow \supset A$. De plus $\sup_{S \in \mathfrak{M}} \varphi(S)=\lim_{l}  \varphi(S_l)$ car la limite d'une suite croissante est la borne supérieure de l'ensemble de ses valeurs. On en déduit $\varphi^\tau (A) \leq \lim_{l}  \varphi(S_l)$. Ainsi, $\varphi^\tau(A)$ est un minorant de $\left\lbrace \lim_{l}  \varphi(S_l), \forall l \, S_l\in \mathfrak{S} \text{ avec } (S_l) \uparrow \supset A \right\rbrace$ donc $\varphi^\tau(A) \leq \varphi^\sigma(A)$.
        \end{itemize}
  \item Considérons $A \subset B$ deux parties de $X$.
  \begin{itemize}
   \item Pour tout $S \in \mathfrak{S}$,
\begin{displaymath}
 \left( B \subset S \Rightarrow A \subset S \right)
   \Rightarrow
   \left\lbrace \varphi(S), S \in \mathfrak{S}, B \subset S\right\rbrace \subset \left\lbrace \varphi(S), S \in \mathfrak{S}, A \subset S\right\rbrace
   \Rightarrow
   \varphi^*(A) \leq \varphi^*(B).
\end{displaymath}
    \item Pour toute suite croissante $(S_l)$ d'éléments de $\mathfrak{S}$,
\begin{multline*}
 \left( (S_l)\uparrow \supset B \Rightarrow (S_l) \uparrow \supset A \right) \\
   \Rightarrow
   \left\lbrace \lim_l\varphi(S_l), \forall l\, S_l \in \mathfrak{S} \text{ avec } (S_l)\uparrow \supset B\right\rbrace
     \subset
  \left\lbrace \lim_l\varphi(S_l), \forall l\, S_l \in \mathfrak{S} \text{ avec } (S_l)\uparrow \supset A\right\rbrace \\
   \Rightarrow
   \varphi^\sigma(A) \leq \varphi^\sigma(B).
\end{multline*}
    \item pour tout système croissant $\mathfrak{M}$ d'ensembles de $\mathfrak{S}$
\begin{multline*}
 \left( \mathfrak{M}\uparrow \supset B \Rightarrow \mathfrak{M} \uparrow \supset A \right) \\
   \Rightarrow
   \left\lbrace \sup_{S \in \mathfrak{M}}\varphi(S), \mathfrak{M} \subset \mathfrak{S} \text{ avec } \mathfrak{M}\uparrow \supset B\right\rbrace
     \subset
  \left\lbrace \sup_{S \in \mathfrak{M}}\varphi(S), \mathfrak{M} \subset \mathfrak{S} \text{ avec } \mathfrak{M}\uparrow \supset A\right\rbrace \\
   \Rightarrow
   \varphi^\tau(A) \leq \varphi^\tau(B).
\end{multline*}
\end{itemize}
 \end{enumerate}
\end{demo}

\subsubsection{Exemple pour les ensembles de classes de congruence}
On veut explorer les définitions du paragraphe précédent dans le cadre de \ref{ExpleZ} où $X= \Z$ et $\mathfrak{S}$ est l'ensemble des unions finies de classes de congruences dans $\Z$ qui est une algèbre.\newline
On rappelle que pour tous naturels non nuls $m$ et $d$, chaque classe modulo $m$ est l'union de $d$ classes disjointes modulo $dm$. Lorsqu'interviennent des classes avec des modulos $m_i$ distincts, on peut considérer le ppcm des $m_i$ et se ramener à un ensemble de classes avec le \emph{même} modulo. Ainsi tout $S\in \mathcal{S}$ est l'union disjointe de classes modulo un même $m$ avec $\varphi(S) = \mathrm{nb\, Classes}\times \frac{1}{m}$.

Soit $b \geq 2$ naturel et $\sum_{l=1}^{+\infty}a_l b^{-l}$ (avec $a_l \in \llbracket 0, b-1 \rrbracket$) la décomposition en base $b$ d'un réel $a\in [0,1]$. Associons à ces données une suite croissante $(S_l)$ d'éléments de $\mathcal{S}$. Par suite croissante, on entend $S_l \subset S_{l+1}$ pour tous les entiers $l\geq1$.

\begin{align*}
 S_1 &= \left\lbrace
   \begin{aligned}
   & \emptyset &\text{ si } a_1 = 0 \\
   &\text{l'union des classes modulo } b \text{ des } i \in \llbracket 0, a_1-1\rrbracket &\text{sinon}
   \end{aligned}
   \right. \\
 S_2 \setminus S_1 &= \left\lbrace
   \begin{aligned}
   & \emptyset &\text{ si } a_2 = 0 \\
   &\text{l'union des classes modulo } b^2 \text{ des } a_1 + ib \text{ avec }i \in \llbracket 0, a_2-1\rrbracket &\text{sinon}
   \end{aligned}
   \right. \\
 S_3 \setminus S_2 &= \left\lbrace
   \begin{aligned}
   & \emptyset &\text{ si } a_3 = 0 \\
   &\text{l'union des classes modulo } b^3 \text{ des } a_1 + a_2b + ib^2 \text{ avec }i \in \llbracket 0, a_3-1\rrbracket &\text{sinon}
   \end{aligned}
   \right. \\
   & \vdots \\
 S_{l+1} \setminus S_l &= \left\lbrace
   \begin{aligned}
   & \emptyset &\text{ si } a_{l+1} = 0 \\
   &\text{l'union des classes modulo } b^{l+1} \text{ des } a_1 + a_2b + \cdots + a_lb^{l-1} + ib^{l} \text{ avec }i \in \llbracket 0, a_{l+1}-1\rrbracket &\text{sinon}
   \end{aligned}
   \right. \\
   & \vdots
\end{align*}
\begin{defi}
 Notons $A = \bigcup_{l\geq 1}A_l$.\newline
 Pour tout $l\geq 1$ notons $A'_l$ le complémentaire de $A_l$ et $A'$ le complémentaire de $A$.
\end{defi}
\begin{prop}
 Pour tout entier $k\geq 1$:
 \begin{math}
  \varphi(S_k)= \sum_{l=1}^k a_l b^{-l}.
 \end{math}
\end{prop}
\begin{demo}
Montrons la formule par récurrence.\newline
 Pour $k=1$ et $a_1 \neq 0$, $S_1$ est l'union disjointe de $a_1$ classes modulo $b$ donc $\varphi(S_1)= a_1\, \frac{1}{b} = a_1 b^{-1}$.\newline
Passons de $k$ à $k+1$:
\begin{displaymath}
 \varphi(S_{k+1}) = \varphi(S_k) + \varphi(S_{k+1} \setminus S_k)
 = \sum_{l=1}^k a_l b^{-l} + a_{k+1}b^{-k-1}.
\end{displaymath}
car $S_{k+1} \setminus S_k$ est l'union disjointe de $a_{k+1}$ classes modulo $b^{k+1}$.
\end{demo}
\begin{rems}
  \begin{enumerate}
   \item La suite $(\varphi(S_k))$ est la suite des approximations du réel $a$ dans son développement en base $b$ donc $(\varphi(S_k)) \rightarrow a$.
   \item D'après les propriétés de $\varphi$ et de la complémentation, la suite $(S'_l)$ est décroissante, $A' = \bigcap_{l\geq 1} S'_l$, $\varphi(S'_k) = 1 - \varphi(S_k)$ et
   $(\varphi(S'_k))$ est une suite décroissante qui tend vers $1-a$.
  \end{enumerate}
 \end{rems}
\begin{prop}{enveloppe extérieure brute}
 \begin{displaymath}
  \varphi^*(A') = 1 - a .
 \end{displaymath}
\end{prop}
\begin{demo}
 Pour tout naturel $k\geq 1$, $S'_k \in \mathfrak{S}$ et $A' \subset S'_k$ donc $\varphi^*(A') \leq \varphi(S'_k)$. On en déduit $\varphi^*(A') \leq 1-a$ par passage à la limite dans une inégalité.\newline
 Soit $S \in \mathfrak{S}$ avec  $A'= \bigcap_{l\geq 1} S'_l \subset S$.
\end{demo}
\subsection{Classe de Carathéodory} \label{ClasseCaratheodory}

\section{Outils} \label{Outils}

\subsection{Arithmétique}
\begin{propn}
Soit $p$ et $q$ deux naturels non nul. Si une classe de congruence modulo $p$ est incluse dans une classe de congruence modulo $q$ alors $p$ est un multiple de $q$.
\end{propn}
\begin{demo}
 Supposons $a+\Z p \subset b + \Z q$. Pour tout $k \in \Z$, il existe $\lambda$ et $\lambda'$ dans $\Z$ tels que
\begin{displaymath}
 \left.
   \begin{aligned}
    a + kp &= b + \lambda q \\
    a + (k+1)p &= b + \lambda' q
   \end{aligned}
  \right\rbrace
  \Rightarrow (\lambda' - \lambda) q = p.
\end{displaymath}
\end{demo}

\begin{lem}
  Pour tous $\alpha_1, \cdots, \alpha_p, \beta$ entiers naturels:
  \begin{displaymath}
    \min \left( \max(\alpha_1, \cdots, \alpha_p) , \beta \right) = \max\left( \min(\alpha_1, \beta), \cdots , \min(\alpha_p,\beta)\right).
  \end{displaymath}
\end{lem}
\begin{demo}
  Notons $T$ le terme de gauche dans l'égalité et $M$ celui de droite. Notons $\alpha_m$ le plus grand des $\alpha_i$ de sorte que $T = \min(\alpha_m, \beta)$.\newline
  Pour tout $i$, $\min(\alpha_i, \beta) \leq \min (\alpha_m, \beta) = T$ donc $M = \max\left( \min(\alpha_1, \beta), \cdots , \min(\alpha_p,\beta)\right) \leq T$.\newline
  D'autre part, $T=\min (\alpha_m, \beta)$ est l'un des $\min(\alpha_i, \beta)$ figurant dans $M$ donc $T \leq M$.
\end{demo}

\begin{propn}[distributivité du pgcd sur le ppcm]
  Pour tous $a_1, \cdots ,a_p, b$ entiers relatifs non nuls:
  \begin{displaymath}
    \left(a_1 \vee \cdots \vee a_p\right)\wedge b = (a_1 \wedge b) \vee \cdots \vee (a_p \wedge b).
  \end{displaymath}
\end{propn}
\begin{demo}
  On utilise la décomposition en facteurs premiers dans $\Z$ en comparant les exposants d'un nombre premier $p$ quelconque. Notons $\alpha_1, \cdots, \alpha_p, \beta$ les exposants respectifs de $p$ dans $a_1, \cdots, a_p, b$. D'après la proposition précédente:
  \begin{align*}
    \text{exposant de $p$ dans } \left(a_1 \vee \cdots \vee a_p\right)\wedge b
    = \min \left( \max(\alpha_1, \cdots, \alpha_p) , \beta \right)
    = \max\left( \min(\alpha_1, \beta), \cdots , \min(\alpha_p,\beta)\right) \\
    = \text{exposant de $p$ dans } (a_1 \wedge b) \vee \cdots \vee (a_p \wedge b).
  \end{align*}
\end{demo}

\begin{propn}[Équation de Bezout]
  Soit $m_1, m_2$ des entiers non nuls et $u\in \Z$. L'équation aux inconnues $\lambda_1, \lambda_2$
  \begin{displaymath}
    u = \lambda_1 m_1 - \lambda_2 m_2
  \end{displaymath}
  admet des solutions si et seulement si $u$ est un multiple de $m_1 \wedge m_2$ (pgcd). Dans ce cas si $(l_1, l_2)$ est un couple solution, l'ensemble des couples solutions est
  \begin{displaymath}
    \left \lbrace (l_1 + \lambda \frac{m_2}{m_1 \wedge m_2},l_2 + \lambda \frac{m_1}{m_1 \wedge m_2}), \lambda \in \Z \right\rbrace .
  \end{displaymath}
\end{propn}
\begin{demo}
  L'équation admet des solutions si et seulement si $u \in \Z m_1 + \Z m_2 = \Z (m_1\wedge m_2)$. Dans ce cas, si $(l_1,l_2)$ et $(\lambda_1, \lambda_2)$ sont deux couples solutions:
  \begin{displaymath}
    \left.
    \begin{aligned}
      u &= l_1 m_1 - l_2 m_2 \\
      u &= \lambda_1 m_1 - \lambda_2 m_2
    \end{aligned}
    \right\rbrace \Rightarrow (\lambda_1 - l_1)m_1 = (\lambda_2 - l_2)m_2 \Rightarrow (\lambda_1 - l_1)\frac{m_1}{m_1 \wedge m_2} = (\lambda_2 - l_2)\frac{m_2}{m_1 \wedge m_2}
  \end{displaymath}
en divisant par le pgcd. Comme $\frac{m_1}{m_1 \wedge m_2}$ et $\frac{m_2}{m_1 \wedge m_2}$ sont premiers entre eux, le théorème de Gauss entraine qu'il existe $\lambda \in \Z$ tel que $\lambda_1 - l_1 = \lambda \frac{m_2}{m_1 \wedge m_2}$. En remplaçant dans la relation et simplifiant, il vient $\lambda_2 - l_2 = \lambda \frac{m_1}{m_1 \wedge m_2}$.
\end{demo}

\begin{propn}[Système de 2 congruences]
  Soit $m_1, m_2$ des entiers non nuls et $a_1 a_2$ des entiers relatifs. Le système de congruences
  \begin{displaymath}
    \left\lbrace
      \begin{align*}
        x &\equiv a_1 \mod m_1 \\
        x &\equiv a_2 \mod m_2
      \end{align*}
    \right.
  \end{displaymath}
  admet des solutions si et seulement si $a_1$ et $a_2$ sont congrus modulo $m_1 \wedge m_2$ (pgcd). Dans ce cas, l'ensemble des solutions est une classe de congruence modulo $m_1 \vee m_2$.
\end{propn}
\begin{demo}
  Si le système admet une solution $x$, il existe $\lambda_1$ et $\lambda_2$ entiers tels que
  \begin{displaymath}
    \left.
    \begin{aligned}
      x &= a_1 + \lambda_1 m_1 \\
      x &= a_2 + \lambda_2 m_2
    \end{aligned}
    \right \rbrace \Rightarrow
    a_1 - a_2 = -\lambda_1 m_1 + \lambda_2 m_2 \in \Z (m_1 \wedge m_2).
  \end{displaymath}
  Supposons $a_1$ et $a_2$ congrus modulo $m_1 \wedge m_2$.
  \begin{align*}
        \left\lbrace
      \begin{aligned}
        x &\equiv a_1 \mod m_1 \\
        x &\equiv a_2 \mod m_2
      \end{aligned}
    \right.
    \Leftrightarrow \exists (\lambda_1, \lambda_2) \in \Z^2 \text{ tq }
            \left\lbrace
      \begin{aligned}
        x &= a_1 + \lambda_1 m_1 \\
        x &= a_2 + \lambda_2 m_2
      \end{aligned}
    \right. \\
    \Leftrightarrow \exists (\lambda_1, \lambda_2) \in \Z^2 \text{ tq }
            \left\lbrace
      \begin{aligned}
        x &= a_1 + \lambda_1 m_1 \\
        a_2 - a_1 &= \lambda_1 m_1 - \lambda_2 m_2
      \end{aligned}
    \right.
  \end{align*}
  La deuxième relation est une équation de Bezout admettant des solutions car $m_1$ et $m_2$ sont congrus modulo le pgcd. L'ensemble des couples solutions et de la forme
  \begin{displaymath}
    \left \lbrace (l_1 + \lambda \frac{m_2}{m_1 \wedge m_2},l_2 + \lambda \frac{m_1}{m_1 \wedge m_2}), \lambda \in \Z \right\rbrace
  \end{displaymath}
  d'après la proposition précédente sur l'équation de Bezout. En réinjectant l'expression des solutions $\lambda_1$ dans la première équation, on trouve qu'un $x$ solution est de la forme
  \begin{displaymath}
    x = a_1 + l_1 m_1 + \lambda \frac{m_1 m_2}{m_1 \wedge m_2} = b + \lambda (m_1 \vee m_2).
  \end{displaymath}
\end{demo}

On peut étendre à un système de $p$ congruences en utilisant la distributivité du pgcd sur le ppcm.
\begin{propn}[Système de congruences]\label{SystCong}
  Soit $m_1, \cdots, m_p$ des entiers non nuls et $a_1, \cdots, a_p$ des entiers relatifs. Le système de congruences
  \begin{displaymath}
    \left\lbrace
      \begin{align*}
        x &\equiv a_1 \mod m_1 \\
          &\vdots \\
        x &\equiv a_p \mod m_p
      \end{align*}
    \right.
  \end{displaymath}
  admet des solutions si et seulement si $a_i \equiv a_j$ modulo $m_i \wedge m_j$ pour tous les couples $(i,j)$ avec $i \neq j$. Dans ce cas, l'ensemble des solutions est une classe de congruence modulo $m_1 \vee \cdots \vee m_p$ (ppcm des $m_i$).
\end{propn}
\begin{demo}
  \begin{enumerate}
    \item Il est évident que la condition d'existence de solutions est nécessaire car elle correspond à l'existence de solutions pour tous les sous-systèmes de 2 congruences. On peut remarquer que si un système vérifie la condition tous ses sous-systèmes la vérifient aussi.
    \item Si l'ensemble $S$ des solutions est non vide avec $x \in S$ et $y$ congrus à $x$ modulo $m_1 \vee \cdots \vee m_p$ alors pour chaque $i$, $y \equiv x \equiv a_i$ modulo $m_i$ donc $x + \Z (m_1 \vee \cdots \vee m_p) \subset S$.\newline
    Réciproquement, $y \in S$ entraine que $y-x = y-a_i + a_i - x$ est divisible par $m_i$ pour tous les $i$ donc $y \in x + \Z (m_1 \vee \cdots \vee m_p)$. Ceci prouve que s'il est non vide, l'ensemble des solutions est une classe de congruence modulo le ppcm des $m_i$.
    \item Montrons par récurrence que la condition  énoncée assure l'existence de solutions. Le cas $p=2$ est traité par la proposition sur les systèmes de 2 congruences.\newline
    Pour le passage de $p$ à $p+1$, considérons un système de $p+1$ congruences vérifiant $a_i \equiv a_j$ modulo $m_i \wedge m_j$ pour tous les couples $(i,j)\in \llbracket 1,  p+1\rrbracket ^2$ avec $i \neq j$.\newline
    Le sous-système formé par les $p$ premières congruences vérifie la condition d'existence de solutions. Par hypothèse de récurrence, il existe $b$ tel que
  \begin{displaymath}
        \left\lbrace
      \begin{align*}
        x &\equiv a_1 \mod m_1 \\
          &\vdots \\
        x &\equiv a_{p+1} \mod m_{p+1}
      \end{align*}
    \right.
    \Leftrightarrow
    \left\lbrace
      \begin{align*}
        x &\equiv b \mod m_1 \vee \cdots \vee m_p \\
        x &\equiv a_{p+1} \mod m_{p+1}
      \end{align*}
    \right. .
  \end{displaymath}
  Ce système de 2 congruences admet-il des solutions?
  \begin{displaymath}
    a_{p+1} - b = (a_{p+1} - a_i) + (a_i - b) \in \Z (m_{p+1} \wedge m_i ) + \Z m_i \subset \Z (m_{p+1} \wedge m_i )
  \end{displaymath}
  pour tous les $i \in \llbracket 1, p \rrbracket$. On en déduit que $a_{p+1} - b$ est divisible par
  \begin{displaymath}
    (m_1 \wedge m_{p+1}) \vee \cdots \vee (m_1 \wedge m_{p+1}) =  (m_1 \vee \cdots \vee m_p) \wedge m_{p+1}
  \end{displaymath}
  qui est la condition assurant que le système de 2 congruences admet des solutions.
  \end{enumerate}
\end{demo}

\subsection{Différence symétrique et crible de Poincaré}\label{criblePoinc}
Des formules du type crible de Poincaré (ou inclusion-exclusion) jouent un rôle important dans la notion de fonction d'ensembles additive ou modulaire (exercice p 12, extension modulaire p 28).

\noindent Soit $X$ un ensemble quelconque et $A_1, \cdots, A_p$ des parties de $X$. Notons $\chi_A$ la fonction caractéristique d'une partie $A$ de $X$. Rappelons les relations fonctionnelles
\begin{displaymath}
  \chi_{A'} = 1 - \chi_A, \; \chi_{A \cap B} = \chi_A \, \chi_B.
\end{displaymath}

\noindent Considérons pour chaque $x\in X$ le nombre de parties $A_i$ contenant $x$ et notons $\nu$ la fonction de $X$ dans $\llbracket 0, p \rrbracket$ ainsi définie. En fait
\begin{displaymath}
  \nu = \chi_{A_1} + \cdots + \chi_{A_p}.
\end{displaymath}
Pour $I \subset \llbracket 0,p \rrbracket$ non vide, notons
\begin{displaymath}
  A_I = \bigcap_{i \in I} A_i, \; A'_I = \bigcap_{i \in I} A'_i.
\end{displaymath}
Soit $m \in \llbracket 1,p\rrbracket$ et $x \in X$ alors:
\begin{displaymath}
  \nu(x) \geq m \Leftrightarrow \exists I \in \mathcal{P}_m \text{ tq } x \in A_I
\end{displaymath}
en notant $\mathcal{P}_m$ l'ensemble des parties $\llbracket 1,p \rrbracket$ à $m$ éléments. On en déduit
\begin{displaymath}
  \{ \nu \geq m \} = \bigcup_{I \in \mathcal{P}_m}A_I.
\end{displaymath}
Pour $m=0$, logiquement $A_\emptyset = X$ car il n'y a pas de condition à vérifier, $\mathcal{P}_0 = \{\emptyset\}$, $\{ \nu \geq 0 \} = X$ donc la formule reste valable.
Pour $m < p $:
\begin{displaymath}
  \{ \nu \geq m + 1 \} = \bigcup_{I \in \mathcal{P}_{m+1}}A_I \subset \{ \nu \geq m \} = \bigcup_{I \in \mathcal{P}_{m}}A_I
  \Rightarrow
  \{ \nu = m \} = \left( \bigcup_{I \in \mathcal{P}_{m}}A_I\right) \setminus \left( \bigcup_{I \in \mathcal{P}_{m+1}}A_I\right).
\end{displaymath}
D'autre part $\nu(x) = m$ si et seulement si il existe $m$ indices $i$ tels que $x$ appartienne à tous ces $A_i$ et à aucun autre $A_j$. Donc
\begin{displaymath}
  \{\nu = m\} = \bigcup_{I \in \mathcal{P}_{m}}A_I \cap A'_{I'} \text{ avec } A'_{I'} = \bigcap_{j\notin I}A'_j.
\end{displaymath}
On peut convenir de noter
\begin{displaymath}
\Delta_m(A_1,\cdots,A_p) = \{\nu = m\} = \bigcup_{I \in \mathcal{P}_{m}}A_I \cap A'_{I'}.
\end{displaymath}
Remarquons que les $A_I \cap A'_{I'}$ de cette union sont deux à deux disjoints. En effet si $I$ et $J$ sont distincts, un des deux n'est pas inclus dans l'autre. Par exemple $I \not \subset J$. Il existe alors $i\in I$ avec $i \in J'$. Donc $A_I \subset A_i$, $A'_J \subset A'_i$ d'où
\begin{displaymath}
  \left( A_I \cap A'_{I'} \right) \cap \left( A_J \cap A'_{J'} \right) \subset A_i \cap A'_i = \emptyset.
\end{displaymath}
On retrouve le cas particulier de la différence symétrique
\begin{displaymath}
  A \Delta B = (A\cap B') \cup (A' \cap B) = \Delta_1(A,B).
\end{displaymath}

\noindent Venons-en aux formules du type crible de Poincaré. Le point central est
\begin{displaymath}
  (A_1 \cup \cdots \cup A_p)' = A'_1 \cap \cdots \cap A'_p
\end{displaymath}
et sa traduction avec les fonctions caractéristiques
\begin{displaymath}
  1 - \chi_{A_1 \cup \cdots \cup A_p} = \prod_{i=1}^p(1 - \chi_{A_i})
  \Rightarrow
  \chi_{A_1 \cup \cdots \cup A_p} = \sum_{m=1}^p (-1)^{m+1}\sum_{I \in \mathcal{P}_m}\chi_{A_I}
\end{displaymath}
en développant et simplifiant par 1.\newline
En particulier lorsque $X$ est fini, on peut exprimer l'égalité fonctionnelle précédente en chaque $x\in X$ pour former des égalités numériques. En sommant ces égalités, on obtient
\begin{displaymath}
  \card(A_1 \cup \cdots \cup A_p) = \sum_{m=1}^p (-1)^{m+1}\sum_{I \in \mathcal{P}_m}\card(A_I).
\end{displaymath}


\noindent Remarquons que la notion de différence symétrique généralisée permet de caractériser la liberté d'une famille de fonctions caractéristiques dans le $\F_2$ espace vectoriel des fonctions de $X$ dans $\F_2$.
\begin{align*}
  (\chi_{A_1}, \cdots, \chi_{A_p}) \text{ libre } &\Leftrightarrow \bigcup_{m \text{ impair}} \Delta_m(A_1, \cdots, A_p) \not = \emptyset \\
  \chi_A = \chi_{A_1} + \cdots + \chi_{A_p} &\Leftrightarrow A = \bigcup_{m \text{ impair}} \Delta_m(A_1, \cdots, A_p)
\end{align*}


\subsection{Topologie métrique} \label{Topologie}
Dans cette sous section, $X$ est un espace métrique c'est à dire que sa topologie est définie par une distance $d$. En particulier $\R^n$ est métrique avec $d(x,y)=\| x-y\|$ pour la norme euclidienne usuelle.
\subsubsection{Distance à une partie} \noindent
\begin{defi}
 Soit $A$ une partie de $X$. On définit une fonction $d(.,A)$ par:
 \begin{displaymath}
  \forall x\in X, \, d(x,A) = \inf\left(d(x,a), a\in A)\right)
 \end{displaymath}
\end{defi}

\begin{propn}\label{prop:ContDistPart}
 Pour toute partie $A$ de $X$, l'application $d(.,A)$ est continue car contractante c'est à dire
 \begin{displaymath}
  \forall (x,x') \in X^2, \; \left|d(x,A) - d(x',A)\right| \leq d(x,x').
 \end{displaymath}
\end{propn}
\begin{demo}
Soit $x$ et $x'$ dans $X$. Pour tout $\varepsilon > 0$, il existe $a \in A$ tel que
\begin{displaymath}
\left.
  \begin{aligned}
    d(x',A) &\geq d(x',a) - \varepsilon \\
    d(x,A) &\leq d(x,a) \leq d(x,x') + d(x',a)\\
  \end{aligned}
\right\rbrace
\Rightarrow
d(x,A) - d(x',A) \leq d(x,x') + \varepsilon.
\end{displaymath}
Ceci étant valable pour tout $\varepsilon >0$ et en intervertissant $x$ et $x'$, on obtient la majoration annocée.
\end{demo}

\begin{defi}
L'adhérence d'une partie est l'ensemble des limites de suites convergentes d'éléments de cette partie.
\end{defi}

\begin{propn} \label{compactEtendu}
Soit $K$ une partie compacte de $\R^n$ et $\delta >0$. Définissons
\begin{displaymath}
 K(\delta) = \left\lbrace x \text{ tq } \exists a \in K \text{ tq } d(x,a)\leq \delta  \right\rbrace.
\end{displaymath}
Alors $K(\delta)$ est une partie compacte.
\end{propn}
\begin{demo}
 Dans $\R^n$, il suffit de montrer que $K(\delta)$ est bornée et fermée.\newline
 Soit $a_0$ fixé. Comme $K$ est borné, il existe $R$ tels que $K$ soit inclus dans la boule fermée de centre $a_0$ et de rayon $R$. Alors $K(\delta)$ est bornée car inclus dans la boule fermée de centre $a_0$ et de rayon $R + \delta$.\newline
 Remarquons que $(\exists a \in K \text{ tq } d(x,a)\leq \delta) \Leftrightarrow d(x,K) \in [0,\delta]$. On en déduit que $K(\delta)$ est fermé car c'est l'image réciproque par une fonction continue d'une partie fermée de $\R$.
\end{demo}
\subsubsection{Adhérence, intérieur, frontière }
Pour toute partie $K$ de $X=\R^n$.
\begin{itemize}
 \item L'adhérence de $K$ notée $\overline{K}$ est l'intersection des parties fermées contenant $K$.
 \item L'intérieur de $K$ notée $\overset{\circ}{K}$ ou $\mathrm{Int}K $ est l'union des parties ouvertes contenues dans $K$.
 \item La frontière de $K$ est la différence ensembliste. Elle est notée $\mathrm{fr}(K) = \overline{K} \setminus \overset{\circ}{K}$.
\end{itemize}
\begin{propn}
 Pour toute partie bornée $K$, l'intérieur, l'adhérence et la frontière sont bornées avec
 \begin{displaymath}
  \lambda(\overset{\circ}{K}) \leq \lambda(K) = \lambda(\overline{K}).
 \end{displaymath}
\end{propn}
\begin{demo}
 Par définition, $\overset{\circ}{K} \subset K\subset \overline{K}$.\newline
 Pour tout $s$ l'approximation $A_s(K)$ est une union finie de cubes de taille $\frac{1}{2^s}$ fermés donc est une partie fermée contenant $K$. L'intérieur et l'adhérence sont donc bornées avec $\lambda(\overset{\circ}{K})\leq \lambda(K) \leq \lambda(\overline{K})$ et $\overline{K} \subset A_s(K)$ donc $\lambda(\overline{K}) \leq \lambda(A_s(K))$ puis $\lambda(\overline{K}) \leq \lambda(K)$ par passage à la limite donc $\lambda(\overline{K}) = \lambda(K)$. \newline
 On ne peut espérer que $\lambda(\overset{\circ}{K}) = \lambda(\overline{K})$ en général comme le montre l'exemple $K= \Q \cap [0,1]$ pour lequel $\overset{\circ}{K}$ est vide donc son adhérence aussi alors que $\overline{K}=[0,1]$.
 \end{demo}


\section{En travaux: déchetterie et gisements}
Cette section rassemble des sections qui n'ont plus leur place dans le plan actuel mais qui méritent d'être conservés quelque part ainsi que des sections en devenir qui pourraient entrer plus tard dans le plan.

\subsection{Graphes, simplexes, CW-complexes?}
L'exemple principal est construit sur les unions $\mathfrak{S}_s$ de cubes de taille $\frac{1}{2^s}$ dyadiques des $\frac{1}{2^s}\Z^n$. La stabilité pour l'intersection n'est pas vérifiée. Pour la récupérer, on peut ajouter toutes les enveloppes convexes de familles de 1,2,...,n+1 points contigus. Cela fait penser aux concepts de simplexe et de réseau combinatoire.

Quel graphe associer à une décomposition en cubes?
On doit pouvoir caractériser en termes de graphe le "bord" d'une union de cubes.

Les intersections non vides de familles de cubes fermés sont des sommets, arêtes, ..., faces. Formons un graphe orienté dont les sommets sont ces intersections. Une arête existe du sommet $s_1$ vers le sommet $s_2$ si et seulemnt si le convexe compact associé à $s_1$ est inclus dans le convexe compact associé à $s_2$.

En dimension 3, un cube fermé solitaire est relié à
\begin{itemize}
 \item 8 sommets
 \item 12 arêtes
 \item 6 faces
\end{itemize}
?????

Soit $N$ la norme infinie de $\R^n$ définie par
\begin{displaymath}
 \forall a =(a_1, \cdots, a_n) \in \R^n, N(a) = \max(|a_1|, \cdots ,|a_n|).
\end{displaymath}
Pour cette norme, chaque $s$-cube $Q_a$ (voir la définition en \ref{Sec:Exples}\ref{SubSec:CellulesBases} \ref{q-cube}) est une boule fermée.
\begin{propn}
Soit $a =(a_1, \cdots, a_n) \in \left(\Z\frac{1}{2^s}\right)^n$ et $b=(b_1,\cdots,b_n)$ avec $b_i = a_i + \frac{1}{2^{s+1}}$ pour tous les $i\in \llbracket 1,n\rrbracket$.\newline
La boule fermée (pour la norme $N$) de centre $b$ et de rayon $\frac{1}{2^{s+1}}$ est le $s$-cube $Q_a$.
\end{propn}
\begin{demo}
 Pour tout $x =(x_1, \cdots, x_n) \in \R^n$,
\begin{multline*}
 N(x-b)\leq \frac{1}{2^{s+1}}
 \Leftrightarrow
 \forall i \in \llbracket 1, n\rrbracket, \; \left|x_i - a_i - \frac{1}{2^{s+1}} \right| \leq \frac{1}{2^{s+1}} \\
 \Leftrightarrow
 \forall i \in \llbracket 1, n\rrbracket, \; -\frac{1}{2^{s+1}} \leq x_i - a_i - \frac{1}{2^{s+1}} \leq \frac{1}{2^{s+1}}
 \Leftrightarrow
 \forall i \in \llbracket 1, n\rrbracket, \; 0 \leq x_i - a_i \leq \frac{1}{2^{s}}.
\end{multline*}
\end{demo}


\subsection{Polygones plans}\label{ExplePolyg}
Ici $X$ est le plan $\R^2$, les figures de base sont les demi-plans fermés Les intersections de familles finies de demi-plans fermés sont des parties fermées et convexes, on convient de les appeler \emph{polygones convexes fermés}. Dans ce cas, au dela de ce qu'on appelle habituellement polygone fermé; un demi espace fermé, une droite, un segment, un point ou une partie comme sur la figure sont aussi des polygones convexes fermés.

On  note $\mathfrak U$ l'ensemble des polygones convexes fermés. Par définition, $\mathfrak{U}$ est stable par intersection. On note $\mathfrak{S}$ l'ensemble des unions finies de polygones convexes fermés. Le système d'ensemble $\mathfrak{S}$ est stable pour l'intersection et l'union. Avec les définitions du livre précisées dans le chapitre suivant, c'est le treillis $L(\mathfrak U)$ c'est à dire le plus petit treillis contenant $\mathfrak{U}$.\newline
On convient d'appeler \emph{polygone fermé} un élément de $\mathfrak{S}$. On peut remarquer que $\emptyset$ et $X$ sont des polygones fermés.

\paragraph{Notations}
\label{sec:notpolygones}
Soit $\alpha \in X^*$ une forme linéaire et $a\in \R$, notons $\{ \alpha \leq a\}$ le demi-plan formé par les $x \in X$ tels que $\alpha(x) \leq a$.


\begin{rem} On peut remplacer $\leq$ par $\geq$.
 \begin{displaymath}
   \{ \alpha \geq a \} = \{ -\alpha \leq -a \}.
 \end{displaymath}
\end{rem}

Soit $A\subset X$, $A \in \mathfrak{S}$ (c'est à dire un polygone fermé) si et seulement si il existe des familles $\alpha_{i,j}$ de formes linéaires et $a_{i,j}$ de nombres réels (avec $I$ et $J$ finis) tels que
\begin{displaymath}
 A = \bigcup_{i \in I} \bigcap_{j \in J}\{ \alpha_{i,j} \leq a_{i,j}\}.
\end{displaymath}
Un polygone fermé est défini par des inégalités larges, son complémentaire fait intervenir des inégalités strictes. Je ne pense pas que l'on puisse obtenir pour $\mathfrak{S}$ des propriétés intéressantes relatives au complémentaire. Je pense que $\mathfrak{S}$ n'est même pas un ovale au sens du livre.\newline
En revanche on peut obtenir des propriétés intéressantes en renversant les inégalités.

\begin{defi}
 Soit $A = \bigcup_{i \in I} \bigcap_{j \in J}\{ \alpha_{i,j} \leq a_{i,j}\} \in \mathfrak{S}$. On appelle \emph{presque complémentaire} de $A$ la partie
 \begin{displaymath}
  A' = \bigcap_{i \in I} \bigcup_{j \in J}\{ \alpha_{i,j} \geq a_{i,j}\}.
 \end{displaymath}
\end{defi}
Attention, il n'est pas clair que cette définition soit consistante car la décomposition en union de polygones fermés convexes n'est pas unique.
\begin{defi}
 Soit $A \in \mathfrak{S}$ un polygone fermé, on appelle \emph{bord} de $A$ le polygone fermé $A \cap A'$.
\end{defi}
\begin{exple}
Le bord d'un demi plan $\{\alpha \leq a\}$ est la droite $\{\alpha = a\}$.
\end{exple}
\begin{lem}
 Soit $(\alpha_1, \alpha_2, \beta)$ une famille de 3 formes linéaires dont toutes les sous-familles de 2 sont libres et $A = \{\alpha_1 \alpha_2\geq 0\}$.\newline
 La droite $\{ \beta = 0 \}$ est incluse dans le presque complémentaire de $A$ si et seulement si le produit des coordonnées de $\beta$ dans la base $(\alpha_1, \alpha_2)$ est strictement positif.
\end{lem}
\begin{demo}
L'hypothèse sur les sous-familles libres entraine que les 3 droites $\{\alpha_1 = 0\}$, $\{\alpha_2 = 0\}$, $\{\beta = 0\}$ sont distinctes. De plus $(\alpha_1, \alpha_2)$ est une base donc il existe $\lambda_1$ et $\lambda_2$ réels tels que $\beta = \lambda_1 \alpha_1 + \lambda_2 \alpha_2$. Les réels $\lambda_1$ et $\lambda_2$ sont non nuls car $(\alpha_1, \beta)$ et $(\alpha_2, \beta)$ sont libres.\newline
Supposons $\lambda_1$ et $\lambda_2$ strictement positifs. Soit $a \in A$. Si $\alpha_1(a) \geq 0$ et $\alpha_2(a) \geq 0$ alors $\beta(a)\geq 0$. Si $a\neq(0,0)$ au moins un des $\alpha_i(a)>0$ donc $\beta(a) > 0$. De même $\alpha_1(a) \leq 0$ et $\alpha_2(a) \leq 0$ entraine $\beta(a)<0$ pour $a\neq (0,0)$. On en déduit que $\{\beta = 0\} \cap A = \{(0,0)\}$ donc $\{\beta = 0\} \subset  A'$. Si $\lambda_1$ et $\lambda_2$ sont strictement négatifs, on se ramène au cas précédent en les changeant en leur opposé ce qui ne change pas la droite. \newline
Réciproquement, supposons $\{\beta = 0\} \subset A' = \left(\{\alpha_1 \leq 0\} \cap \{\alpha_2 \geq 0\}\right) \cup \left(\{\alpha_1 \geq 0\} \cap \{\alpha_2 \leq 0\}\right)$. Soit $b \neq (0,0)$ dans $\{\beta = 0\}$. Alors $b \in A'$ donc $\alpha_1(b) \alpha_2(b) <0$.
\begin{displaymath}
 \beta(b) = 0 \Rightarrow \lambda_2 = - \frac{\alpha_1(b)}{\alpha_2(b)} \lambda_1 \Rightarrow \lambda_1 \lambda_2 = - \frac{\alpha_1(b)}{\alpha_2(b)} \lambda_{1}^2 > 0.
\end{displaymath}
\end{demo}

\begin{defi}
Pour tout $M \in \mathfrak{S}$ définissons $c(M)$ comme le nombre de composantes connexes bornées de $M$.
\end{defi}

\subsection{Exemple arithmétique}
\subsubsection{Fonction d'ensembles}
Quand on cherche à probabiliser $\Z$, on peut considèrer, pour $m$ non nul donné les classes modulo $m$. Considérons une expérience aléatoire consistant à tirer au hasard un entier et à former son reste modulo $m$. Les évènements élémentaires sont les classes modulo $m$. La probabilité d'un tel évènement est $\frac{1}{m}$.

On définit donc naturellement une fonction \og probabilité\fg \, $\varphi$ sur $\mathfrak{U}$ par
\begin{displaymath}
  \varphi(\emptyset) = 0, \;\varphi(a + \Z m) = \frac{1}{m}.
\end{displaymath}

Dans un univers probablisé, la fonction probabilité définie sur l'ensemble des évènements est modulaire au sens introduit par l'ouvrage.
\begin{defi}[fonction modulaire]\index{fonction modulaire}
  On dit qu'une fonction $\varphi$ définie dans $\mathfrak{S}$ est modulaire si et seulement si
  \begin{displaymath}
    \forall (A,B)\in \mathfrak{S}^2,\; \varphi(A) + \varphi(B) = \varphi(A\cap B) + \varphi(A \cup B).
  \end{displaymath}
\end{defi}
\begin{rem}
  Lorsque les éléments de $\mathfrak{S}$ sont des ensembles finis, la fonction \og nombre d'éléments \fg \, est modulaire.
\end{rem}

\noindent Peut-on étendre de manière consistante $\varphi$ à une fonction \emph{modulaire} sur l'ensemble $\mathfrak{S}$ des unions finies de classes de congruences?\newline
Je donne plus loin une telle définition qui rend évidentes les remarques qui suivent. Je les ai conservés car elles m'ont encouragé à creuser cet exemple.
\begin{enumerate}
  \item Par définition $\varphi(\Z) = 1$.
  \item Dans le cas d'une famille finie de classes disjointes, l'image de l'union doit être la somme des images.
  \item Si $\varphi(A)$ est défini et $A'$ son complémentaire on doit avoir $\varphi(A') + \varphi(A) = 1$.
  \item Avec les conventions précédentes, pour $A = \left(a + \Z p\right)$, $B = \left(b + \Z q\right)$, montrons que
  \begin{displaymath}
    \varphi(A) + \varphi(B) = \varphi(A\cap B) + \varphi(A \cup B).
  \end{displaymath}
  En effet :
  \begin{displaymath}
    \varphi(A) = \frac{1}{p} \hspace{0.5cm}
    \varphi(B) = \frac{1}{q} \hspace{0.5cm}
    \varphi(A \cap B) =
    \left\lbrace
      \begin{aligned}
        0 &\text{ si } a \not \equiv b \mod p\wedge q\\
        \frac{1}{p\vee q} &\text{ si } a \equiv b \mod p\wedge q
      \end{aligned}
    \right.
  \end{displaymath}
  La formule est vérifiée si $A\cap B = \emptyset$. Dans l'autre cas, considérons $(A\cup B)'$ et la propriété 3 pour prouver la formule.
\begin{multline*}
  (A \cup B)' = A' \cap B'
  =     \left( \bigcup_{a'\in \llbracket 0, p\llbracket \setminus\{a\} } \left(a' + p\Z\right)\right)
   \cap \left( \bigcup_{b'\in \llbracket 0, q\llbracket \setminus\{b\} } \left(b' + p\Z\right)\right) \\
  = \bigcup_{(a',b')\in (\llbracket 0, p\llbracket \setminus\{a\}) \times (\llbracket 0, q\llbracket \setminus\{b\})} \left(a' + p\Z\right)\cap \left(b' + q\Z\right)
\end{multline*}
Chaque intersection est l'ensemble des solutions d'un système de 2 congruences c'est à dire le vide ou une classe modulo $p\vee q$.\newline
Si on oublie les conditions $a'\not \equiv a \mod p$ et $b'\not \equiv b \mod q$, parmi les $pq$ couples $(a',b')\in \llbracket 0,p\llbracket \times \llbracket 0,q\llbracket$, combien vérifient $a' \equiv b' \mod p \wedge q$ ? \newline
Pour chaque $a'$ fixé, $b'$ doit être dans la classe de $a'$ modulo $p\wedge q$. Dans $\llbracket 0, q \llbracket$, cette classe contient $\frac{q}{p \wedge q}$ entiers. Le nombre total de couples possibles est donc
\begin{displaymath}
  \frac{pq}{p \wedge q}.
\end{displaymath}
Combien de couples doit-on enlever à ce nombre?\newline
Pour $a' = a$, il faut enlever les $\frac{q}{p \wedge q}$ éléments de la classe de $a$ modulo $p \wedge q$ dans $\llbracket 0, q\llbracket$. Parmi ceux là se trouve $(a,b)$ car $a \equiv b \mod p\wedge q$. De même pour $b' = b$, il faut enlever $\frac{p}{p \wedge q}-1$ couples (avec -1 pour ne pas compter deux fois $(a,b)$).\newline
Finalement, le nombre de couples $(a',b')$ contribuant réellement à la grande union est

\begin{displaymath}
  \frac{pq}{p \wedge q} - \frac{q}{p \wedge q} - \frac{p}{p \wedge q} + 1 = \left(\frac{p}{p \wedge q}-1\right) \left(\frac{q}{p \wedge q}-1\right).
\end{displaymath}
Avec la convention 3, on obtient
\begin{multline*}
  \varphi((A \cup B)') = \left(\frac{p}{p \wedge q}-1\right) \left(\frac{q}{p \wedge q}-1\right) \frac{1}{p \vee q}\\
  \Rightarrow
  \varphi(A \cup B) = 1 - \left(\frac{p}{p \wedge q}-1\right) \left(\frac{q}{p \wedge q}-1\right) \frac{1}{p \vee q}.
\end{multline*}
En distribuant avec $(p \wedge q)(p \vee q) = pq$, il vient
\begin{displaymath}
  \varphi(A \cup B) = 1 - 1 + \frac{1}{p} + \frac{1}{q} - \frac{1}{p \vee q} = \varphi(A) + \varphi(B) - \varphi(A\cap B).
\end{displaymath}
\end{enumerate}

La définition commode de $\varphi$ utilise la nouvelle caractérisation des éléments de $\mathfrak{S}$.\newline
Soit $X \subset \Z$, $I_X$ est l'ensemble des $\mu \in \Z$ tels que $X + \mu =\left\lbrace x + \mu , x\in X\right\rbrace = X$. Il existe $\mu_X \in \N$ tel que $I_X = \Z \mu_X$.
\begin{displaymath}
  X \in \mathfrak{S} \Leftrightarrow \mu_X \leq 1 .
\end{displaymath}

\begin{lem}
  Soit $X\in \mathfrak{S}$ et $m=\mu_X$. Pour tout $n\in I_X$,
  \begin{displaymath}
      \frac{\sharp \pi_n(X)}{n} = \frac{\sharp \pi_m(X)}{m}.
  \end{displaymath}
\end{lem}
\begin{demo}
  En fait $n = pm$ avec $p$ entier car $n \in I_X = \Z m$. Chaque classe modulo $n$ est la réunion de $p$ classes disjointes modulo $m$.
  \begin{displaymath}
    \frac{\sharp \pi_n(X)}{n} = \frac{p \, \sharp \pi_m(X)}{ p m} = \frac{\sharp \pi_m(X)}{m}.
  \end{displaymath}
\end{demo}
\begin{defi}\label{defPhi}
  On définit une fonction $\varphi$ dans $\mathfrak{S}$ par:
  \begin{displaymath}
    \forall X \in \mathfrak{S}, \; \varphi(X) = \frac{\sharp \pi_n(X)}{n}
  \end{displaymath}
pour n'importe quel $n\in I_X$.
\end{defi}
\begin{prop}
  La fonction $\varphi$ est modulaire, $\varphi(a + \Z m) = \frac{1}{m}$.
\end{prop}
\begin{demo}
  Soit $A$ et $B$ dans $\mathfrak{S}$. Le ppcm $m = \mu_A \vee \mu_B$ est dans $I_A, I_B, I_{A\cup B}, I_{A\cap B}$. En l'utilisant pour exprimer les valeurs de $\varphi$, on est ramené à la modularité de la fonction nombre d'éléments.\newline
  Si $A= a + \Z m$, $m \in I_A$ et $\pi_m(A)$ est un singleton.
\end{demo}

\subsubsection{Nouvelle caractérisation}
Soit $X \subset \Z$, considérons l'ensemble $I_X$ des $\mu \in \Z$ tels que $X + \mu =\left\lbrace x + \mu , x\in X\right\rbrace = X$.
\begin{rems}
  \begin{enumerate}
    \item $I_X$ est un sous-groupe additif de $\Z$.
    \item Il existe un unique $\mu_X \in \N$ tel que $I_X = \Z \mu_X$. Pour tout $x\in X$, $x + \Z \mu_X \in X$.
    \item $\mu_X = 1$ si et seulement si $X=\Z$.
    \item Si $X = a + \Z m$ avec $m \geq 1$, $\mu_X = m$.
    \item On suppose $\mu_X > 1$. Pour tout $x \in X$, $x + \Z \mu_X \subset X$.
    \item On suppose $\mu_X > 1$. En notant $A  = \llbracket 0 , \mu_X \llbracket \, \cap \, X$,
\begin{displaymath}
  X = \bigcup_{a \in A}\left(a + \Z \mu_X\right).
\end{displaymath}
  \end{enumerate}
\end{rems}

\begin{demo}
  \begin{enumerate}
    \item $0\in I_X$.\newline
    Soit $\mu \in I_X$.\newline
      Pour tout $y \in X-\mu$, il existe $x \in X$ tel que $y=x-\mu$. Comme $X \subset X + \mu$, il existe $x'\in X$ tel que
$x = x' + \mu$. Donc $y = x - \mu =x'\in X$. Ceci montre $X - \mu \subset X$.\newline
      Pour tout $x \in X$, $x = (x + \mu) - \mu$ avec $x + \mu \in X + \mu \subset X$donc $x \in X - \mu$. Ceci montre $X \subset X - \mu$.
    \item La division euclidienne montre que les sous-groupes additifs de $\Z$ sont de cette forme.
    \item C'est le principe même du raisonnement par récurrence.
    \item Par définition de $X$, $m \in I_X$ donc $\mu_X$ divise $m$. Comme $\mu_X \in I_X$, $x + \mu_x \in X = x +\Z m$ donc $m$ divise $\mu_X$.
    \item Conséquence immédiate de la définition de $\mu_X$.
    \item On déduit de 5 que $\bigcup_{a \in A}\left(a + \Z \mu_X\right) \subset X$. Réciproquement, soit $x\in X$, il existe un $a$ dans $\llbracket 0, \mu_X \llbracket$ congru à $x$ modulo $\mu_x$. Il est encore dans $X$ d'après 5 ce qui prouve l'inclusion réciproque.
  \end{enumerate}
\end{demo}
On en déduit une nouvelle caractérisation de l'ensemble $\mathfrak{S}$ introduit dans les paragraphes précédents.
\begin{propn}
  Soit $X$ une partie $\Z$, les deux propriétés suivantes sont équivalentes.
\begin{enumerate}
  \item $X \in \mathfrak{S}$ c'est à dire est une réunion finie de classes de congruences.
  \item $\mu_X \geq 1$.
\end{enumerate}
Si $X$ vérifie cette condition, $X = \bigcup_{a \in A}\left(a + \Z \mu_X\right)$  avec $A  = \llbracket 0 , \mu_X \llbracket \,\cap \, X$.
\end{propn}
\begin{demo}
  Les remarques précédentes montrent que (2) entraine (1). Réciproquement, si $X$ est une union finie de classes de congruences, le ppcm des modulos de ces classes est un élément non nul de $I_X$. L'expression de $X$ est une reformulation de la remarque 6.
\end{demo}
\begin{propn}
  Soit $X \in \mathfrak{S}$, $n \in I_X$, $\pi_n$ la projection canonique $\Z \rightarrow \Z / n\Z$ et $A = \pi_n(X)$: alors $X = \pi_n^{-1}(A)$.
\end{propn}
\begin{demo}
  Il s'agit seulement de reformuler la proposition précédente en termes de projection canonique.
\end{demo}

\begin{propn} \label{muInfK}
 Soit $K$ naturel non nul et $S \in \mathfrak{S}$ non vide.
 \begin{displaymath}
  \mu_S \leq K \Rightarrow S \cap \llbracket 0, K \rrbracket \neq \emptyset.
 \end{displaymath}
\end{propn}
\begin{demo}
Par définition de $\mu_S$, $S$ contient au moins une classe modulo $\mu_S$. Cette classe coupe $\llbracket 0, \mu_S -1 \rrbracket \subset \llbracket 0, K \rrbracket$.
\end{demo}

Les stabilités définissant la notion d'algèbre s'éclairent.
\begin{propn}
  Pour tous $X$ et $Y$ dans $\mathfrak{S}$:
\begin{align*}
  X \cup Y \in \mathfrak{S} &\text{ avec } \mu_{X\cup Y} \,\mathrm{ divise } \, \mu_X \vee \mu_Y  \\
  X \cap Y \in \mathfrak{S} &\text{ avec } \mu_{X\cap Y} \,\mathrm{ divise } \,  \mu_X \vee \mu_Y \\
  X' \in \mathfrak{S} &\text{ avec } \mu_{X'} = \mu_X
\end{align*}
\end{propn}
\begin{demo}
  \begin{enumerate}
    \item On vérifie facilement que $(X+\mu) \cup (Y+\mu) = (X\cup Y) + \mu$ et $(X+\mu) \cap (Y+\mu) = (X\cap Y) + \mu$. On en déduit $I_X \cap I_Y \subset I_{X\cup Y}$ et $I_X \cap I_Y \subset I_{X\cap Y}$ puis $\mu_{X\cup Y}$ et $\mu_{X\cap Y}$ divisent $\mu_X \vee \mu_Y$.\newline
    D'autre part une classe de congruence modulo $m$ se décompose en union de classes modulo n'importe quel multiple de $m$. Donc $X$ et $Y$ se décomposent en classes modulo $\mu_X \vee \mu_Y$. On en déduit que $X\cup Y$ et $X\cap Y$ se décomposent aussi en classes modulo $\mu_X \vee \mu_Y$. Donc $\mu_X \vee \mu_Y$ est dans $I_{Y\cup Y}$ donc $\mu_{X\cup Y}$ divise $\mu_X \vee \mu_Y$.
    \item Vérifier $(X + \mu)' = X' + \mu$. On en déduit
\begin{displaymath}
  X + \mu = X \Leftrightarrow (X+ \mu)' = X' \Leftrightarrow X' + \mu = X'.
\end{displaymath}
On en déduit $I_{X'} = I_X$.
  \end{enumerate}
\end{demo}
\begin{rem}
 Lorsque $X$ et $Y$ sont complémentaires, $\mu_X = \mu_Y$ mais $\mu_{X\cup Y} = 1$. On voit bien qu'en général, la première divisibilité n'est pas une égalité.
\end{rem}

\subsubsection{Suites de parties}\label{ExplesSuitesCongru}
Proposons divers exemples de suites de parties dans $\mathfrak{S}$.

\textbf{Exemple 1.}\newline
Soit  $(m_n)_{n\geq 1}$ une suite d'entiers naturels tels que $m_n < m_{n+1}$ avec $m_n$ divise $m_{n+1}$.\newline
Notons $S_n = m_n \Z$ l'ensemble des multiples de $m_n$ et $T_n$ son complémentaire c'est à dire l'ensemble des entiers non divisibles par $m_n$.
 \begin{itemize}
  \item Pour tout $n$, $S_n$ et $T_n$ appartiennent à $\in \mathfrak{S}$ avec $\varphi(S_n)=\frac{1}{m_n}$ et $\varphi(T_n)=\frac{m_n-1}{m_n}$.
  \item La suite $(S_n)$ est décroissante et la suite $(T_n)$ est croissante. En effet, comme $m_n$ divise $m_{n+1}$, tout multiple de $m_{n+1}$ est un multiple de $m_{n}$ donc $S_{n+1} \subset S_{n}$ et $T_n \subset T_{n+1}$.
  \item $(m_n) \rightarrow + \infty$, $(\varphi(S_n)) \rightarrow 0$ , $(\varphi(T_n)) \rightarrow 1$. Évident.
  \item $\Z^* = \bigcup_{n\geq 1} T_n$, $\left\lbrace 0 \right\rbrace = \bigcap_{n\geq 1} S_n$. En effet, pour tout entier $k$ non nul, il existe un $n$ tel que $|k| < m_n$ donc $m_n$ ne divise pas $k$ c'est à dire $k \in S_n$.
 \end{itemize}

\textbf{Exemple 2.}\newline
Soit  $A$ une partie finie de $\Z$ et $(m_n)_{n\geq 1}$ une suite d'entiers naturels tels que $m_n < m_{n+1}$ avec $m_n$ divise $m_{n+1}$.\newline
Notons $S_n = \bigcup_{a \in A} \left(a + m_n \Z\right)$.
 \begin{itemize}
  \item Pour tout $n$, $S_n\in \mathfrak{S}$ avec $A \in S_n$ et $\varphi(S_n)=\frac{\sharp A }{m_n}$.
  \item La suite $(S_n)$ est décroissante. En effet, comme $m_n$ divise $m_{n+1}$, $a + m_{n+1}\Z \subset a + m_{n}\Z$.
  \item $(m_n) \rightarrow + \infty$, $(\varphi(S_n)) \rightarrow 0$ . Évident.
  \item $A = \bigcap_{n\geq 1} S_n$. En effet, pour tout entier $k \notin A$, il existe un $n$ tel que $|k -a| < m_n$ pour tous les $a\in A$ donc $k \notin S_n$.
 \end{itemize}

\textbf{Exemple 3.}\newline \label{SuiteCroissAAquelc}
Soit $A = \left\lbrace a_n, n \in\N\right\rbrace$ une partie quelconque de $\Z$ (elle est forcément dénombrable) et $p$ naturel fixé. Pour tout $n \in \N$, posons $S_n = \bigcup_{k =0}^n \left(a_k + 2^{k+p} \Z\right)$.
 \begin{itemize}
  \item Pour tout $n$, $S_n\in \mathfrak{S}$ avec
  \begin{displaymath}
    \varphi(S_n)\leq \frac{1}{2^p} + \frac{1}{2^{p+1}} + \cdots + \frac{1}{2^{p+2}} \leq 2^{1-p}.
  \end{displaymath}
  \item La suite $(S_n)$ est croissante avec $A \subset \bigcup_{n\in \N}S_n$.
 \end{itemize}

 \textbf{Exemple .} \newline \label{SuiteCroissA}
On repart de l'exemple 3 avec $A \in \mathfrak{S}$. Il existe un entier naturel $\mu$ tel que $A$ soit une union disjointe de classes modulo $\mu$. Pour tout $n \in \N$, posons $S_n = \bigcup_{k =0}^n \left(a_k + \mu^{k+p} \Z\right)$.
 \begin{itemize}
  \item Pour tout $n$, $S_n\in \mathfrak{S}$ avec $S_n \subset A$. En effet $a_k \in A$ et $\mu^{n+k}$ est un multiple de $\mu$ donc $\left(a_k + \mu^{k+p} \Z\right)$ est inclus dans la classe de $a_k$ modulo $\mu$ donc dans $A$.
  \item Pour tout $n$, $\varphi(S_n)\leq \mu^{1-p}$.
  \item La suite $(S_n)$ est croissante avec $A = \bigcup_{n\in \N}S_n$ et $\lim (S_n)\leq \mu^{1-p}$.
 \end{itemize}

\newpage
 \printbibliography[heading=bibintoc, title=Bibliographie-Index]
 \printindex
\end{document}


